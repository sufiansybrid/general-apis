(()=>{var Gn=Object.create;var on=Object.defineProperty;var Vn=Object.getOwnPropertyDescriptor;var Zn=Object.getOwnPropertyNames;var Yn=Object.getPrototypeOf,Xn=Object.prototype.hasOwnProperty;var Kn=(h,e)=>()=>(e||h((e={exports:{}}).exports,e),e.exports);var Qn=(h,e,a,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Zn(e))!Xn.call(h,l)&&l!==a&&on(h,l,{get:()=>e[l],enumerable:!(c=Vn(e,l))||c.enumerable});return h};var Jn=(h,e,a)=>(a=h!=null?Gn(Yn(h)):{},Qn(e||!h||!h.__esModule?on(a,"default",{value:h,enumerable:!0}):a,h));var bn=Kn((Ue,Et)=>{(function(h,e){typeof Ue=="object"&&typeof Et=="object"?Et.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ue=="object"?Ue.html2md=e():h.html2md=e()})(Ue,function(){return function(h){var e={};function a(c){if(e[c])return e[c].exports;var l=e[c]={i:c,l:!1,exports:{}};return h[c].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=h,a.c=e,a.d=function(c,l,p){a.o(c,l)||Object.defineProperty(c,l,{enumerable:!0,get:p})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,l){if(1&l&&(c=a(c)),8&l||4&l&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(a.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),2&l&&typeof c!="string")for(var s in c)a.d(p,s,function(t){return c[t]}.bind(null,s));return p},a.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(l,"a",l),l},a.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},a.p="",a(a.s=46)}([function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(1),l=a(12),p=a(6),s=a(7),t=a(2),n=function(){function i(r,d,o){var u=o===void 0?{}:o,f=u.keepSpace,m=f!==void 0&&f,y=u.prevTagName,x=y===void 0?"":y,w=u.nextTagName,E=w===void 0?"":w,b=u.prevTagStr,v=b===void 0?"":b,T=u.nextTagStr,O=T===void 0?"":T,P=u.parentTag,H=P===void 0?"":P,z=u.isFirstSubTag,M=z===void 0||z,se=u.calcLeading,ae=se!==void 0&&se,le=u.leadingSpace,fe=le===void 0?"":le,ge=u.layer,pt=ge===void 0?1:ge,Ee=u.noWrap,ut=Ee!==void 0&&Ee,Oe=u.prevHasEndSpace,N=Oe!==void 0&&Oe,Ae=u.prevHasStartSpace,j=Ae!==void 0&&Ae,Ce=u.match,I=Ce===void 0?null:Ce,ce=u.indentSpace,Le=ce===void 0?"":ce,Me=u.language,Re=Me===void 0?"":Me,Pe=u.count,Ze=Pe===void 0?1:Pe,J=u.tableColumnCount,me=J===void 0?0:J,X=u.noExtraLine,Ie=X!==void 0&&X,ye=u.inTable,pe=ye!==void 0&&ye;if(this.tagName=d,this.rawStr=r,this.parentTag=H,this.prevTagName=x,this.nextTagName=E,this.prevTagStr=v,this.nextTagStr=O,this.isFirstSubTag=M,this.calcLeading=ae,this.leadingSpace=fe,this.layer=pt,this.noWrap=ut,this.match=I,this.indentSpace=Le,this.language=Re,this.count=Ze,this.inTable=pe,this.tableColumnCount=me,this.noExtraLine=Ie,this.prevHasEndSpace=N,this.prevHasStartSpace=j,this.hasStartSpace=!1,this.hasEndSpace=!1,this.keepSpace=m,!this.__detectStr__(r,this.tagName))return this.attrs={},void(this.innerHTML="");var ue=this.__fetchTagAttrAndInnerHTML__(r),_e=ue.attr,be=ue.innerHTML;be.startsWith(" ")&&(0,c.isSpacePassingTag)(d)&&(this.hasStartSpace=!0),be.endsWith(" ")&&(0,c.isSpacePassingTag)(d)&&(this.hasEndSpace=!0),this.attrs=_e,this.innerHTML=be}return i.prototype.__detectStr__=function(r,d){if(r[0]!=="<")return"Not a valid tag, current tag name: ".concat(this.tagName,", tag content: ").concat(r),!1;for(var o="",u=!1,f=1;f<r.length&&r[f]!==">";f++)!u&&/(\s|\/)/.test(r[f])&&(u=!0),u||(o+=r[f]);return o===d},i.prototype.__fetchTagAttrAndInnerHTML__=function(r){for(var d="",o=1;o<r.length&&r[o]!==">";o++)d+=r[o];for(var u=r.slice(o+1),f="",m=-1,y=u.length-1;y>=0;y--)if((f=u[y]+f).startsWith("</")){f.startsWith("</"+this.tagName+">")&&(m=y);break}m===-1&&(0,c.isSelfClosing)(this.tagName)&&this.tagName;var x=(0,c.getTagAttributes)(d);return this.tagName&&delete x[this.tagName],{attr:x,innerHTML:u.slice(0,m)}},i.prototype.__onlyLeadingSpace__=function(r){r=r.trim();for(var d=0;d<r.length;d++)if(r[d]!==p.SINGLE)return!1;return!0},i.prototype.__isEmpty__=function(r){return!this.keepSpace&&(r===""&&this.tagName!=="td"||this.calcLeading&&this.__onlyLeadingSpace__(r))},i.prototype.getValidSubTagName=function(r){return r},i.prototype.beforeParse=function(){var r=t.default.get().tagListener;if(r){var d=r(this.tagName,{parentTag:this.parentTag,prevTagName:this.prevTagName,nextTagName:this.nextTagName,isFirstSubTag:this.isFirstSubTag,attrs:this.attrs,innerHTML:this.innerHTML,language:this.language,match:this.match,isSelfClosing:!1}),o=d.attrs,u=d.language,f=d.match;this.attrs=o,typeof u=="string"&&(this.language=u),typeof f<"u"&&(this.match=f)}return""},i.prototype.parseValidSubTag=function(r,d,o){var u=new((0,c.getTagConstructor)(d))(r,d,o);return[u.exec(),u]},i.prototype.parseOnlyString=function(r,d,o){var u=new l.default(r,d,o);return[u.exec(),u]},i.prototype.afterParsed=function(r){return r},i.prototype.slim=function(r){return this.keepSpace?r:r.trim()},i.prototype.beforeMergeSpace=function(r){return r},i.prototype.mergeSpace=function(r,d,o){return this.keepSpace&&this.tagName!=="pre"?r.endsWith(`
`)?r:r+o.replace(/\n+/g,`
`):d+r+o},i.prototype.afterMergeSpace=function(r){return r},i.prototype.beforeReturn=function(r){return!((0,c.isSpacePassingTag)(this.prevTagName)&&this.prevHasEndSpace||(0,c.isSpacePassingTag)(this.tagName)&&this.hasStartSpace)||/^\s+/.test(r)||/\s+$/.test(this.prevTagStr)?r:" "+r},i.prototype.exec=function(r,d){r===void 0&&(r=""),d===void 0&&(d="");for(var o=this.beforeParse(),u=(0,c.generateGetNextValidTag)(this.innerHTML),f=u(),m=f[0],y=f[1],x=null,w=!1,E=!1;y!=="";){var b,v=u(),T=v[0],O=v[1],P={parentTag:this.tagName,nextTagName:T,nextTagStr:O,prevTagName:x,prevTagStr:o,prevHasEndSpace:E,prevHasStartSpace:w,leadingSpace:this.leadingSpace,layer:this.layer,keepSpace:this.keepSpace,inTable:this.inTable,calcLeading:(this.tagName==="li"||this.tagName==="ol"||this.tagName==="ul")&&this.calcLeading},H=void 0,z=void 0;m!=null?(H=(b=this.parseValidSubTag(y,m,P))[0],z=b[1]):(H=(b=this.parseOnlyString(y,m,P))[0],z=b[1]),E=z?.hasEndSpace||!1,w=z?.hasStartSpace||!1;var M=this.getValidSubTagName(m);m=T,y=O,M==null&&this.__isEmpty__(H)||(!this.keepSpace&&(0,s.default)(x)&&(0,s.default)(M)&&(o=o.replace(/\n+$/,`
`),H=H.replace(/^\n+/,`
`)),x=M,this.isFirstSubTag=!1,o+=H)}return o=this.afterParsed(o),o=this.slim(o),this.__isEmpty__(o)?"":(o=this.beforeMergeSpace(o),!this.noExtraLine&&(0,s.default)(this.tagName)&&this.prevTagName&&!o.startsWith(`
`)&&!(0,s.default)(this.prevTagName)&&this.parentTag&&(r=`

`),o=this.mergeSpace(o,r,d),this.noWrap&&!this.keepSpace&&(o=o.replace(/\s+/g," ")),o=this.afterMergeSpace(o),o=this.beforeReturn(o))},i}();e.default=n},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSpacePassingTag=e.isIndependentTag=e.clearComment=e.getLanguage=e.getTableAlign=e.getTagAttributes=e.isSelfClosing=e.generateGetNextValidTag=e.getTagConstructor=e.getRealTagName=e.unescapeStr=e.extraEscape=void 0;var c=a(18);Object.defineProperty(e,"extraEscape",{enumerable:!0,get:function(){return c.extraEscape}}),Object.defineProperty(e,"unescapeStr",{enumerable:!0,get:function(){return c.unescapeStr}});var l=a(47);e.generateGetNextValidTag=l.default;var p=a(48);e.getTagConstructor=p.default;var s=a(11);e.isSelfClosing=s.default;var t=a(51);e.getTagAttributes=t.default;var n=a(52);e.getLanguage=n.default;var i=a(53);e.clearComment=i.default;var r=a(13);e.getRealTagName=r.default;var d=a(7);e.isIndependentTag=d.default;var o=a(54);e.isSpacePassingTag=o.default;var u=a(55);e.getTableAlign=u.default},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function s(t){var n=t===void 0?{}:t,i=n.skipTags,r=i===void 0?[]:i,d=n.emptyTags,o=d===void 0?[]:d,u=n.ignoreTags,f=u===void 0?[]:u,m=n.aliasTags,y=m===void 0?{}:m,x=n.renderCustomTags,w=x===void 0||x,E=n.tagListener,b=E===void 0?function(v,T){return T}:E;this.options={skipTags:r,emptyTags:o,ignoreTags:f,aliasTags:y,renderCustomTags:w,tagListener:b}}return s.prototype.get=function(){return this.options},s.prototype.clear=function(){this.options={}},s.prototype.set=function(t,n){var i=this;t&&Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(r){n?i.options[r]=t[r]:function(d,o,u){if(!(u in d))return void(d[u]=o[u]);var f=Array.isArray(d[u]),m=Object.prototype.toString.call(d[u])==="[object Object]";d[u]=f?d[u].concat(o[u]):m?Object.assign(d[u],o[u]):o[u]}(i.options,t,r)})},s.prototype.reset=function(){this.options=JSON.parse(JSON.stringify(l)),this.options.tagListener=function(t,n){return n}},s}(),l={ignoreTags:["","style","head","!doctype","form","svg","noscript","script","meta"],skipTags:["div","html","body","nav","section","footer","main","aside","article","header"],emptyTags:[],aliasTags:{figure:"p",dl:"p",dd:"p",dt:"p",figcaption:"p"},renderCustomTags:!0},p=new c;p.reset(),e.default=p},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h1");var i=p.call(this,t,n)||this;return i.match="#",i}return c(s,p),s.prototype.beforeMergeSpace=function(t){return this.match+" "+t},s.prototype.exec=function(t,n){return t||(t=`
`),n||(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(1),l=a(2),p=function(){function s(t,n,i){var r=i===void 0?{}:i,d=r.parentTag,o=d===void 0?"":d,u=r.leadingSpace,f=u===void 0?"":u,m=r.layer,y=m===void 0?1:m,x=r.isFirstSubTag,w=x!==void 0&&x,E=r.inTable,b=E!==void 0&&E,v=r.match,T=v===void 0?null:v,O=r.prevTagName,P=O===void 0?"":O,H=r.nextTagName,z=H===void 0?"":H;if(this.tagName=n,this.rawStr=t,this.parentTag=o,this.isFirstSubTag=w,this.prevTagName=P,this.nextTagName=z,this.leadingSpace=f,this.layer=y,this.innerHTML="",this.match=T,this.inTable=b,this.__detectStr__(t,this.tagName)){var M=this.__fetchTagAttr__(t).attr;this.attrs=M}else this.attrs={}}return s.prototype.__detectStr__=function(t,n){if(t[0]!=="<")return"Not a valid tag, current tag name: ".concat(this.tagName,", tag content: ").concat(t),!1;for(var i="",r=!1,d=1;d<t.length&&t[d]!==">";d++)!r&&/(\s|\/)/.test(t[d])&&(r=!0),r||(i+=t[d]);return i===n},s.prototype.__fetchTagAttr__=function(t){for(var n="",i=1;i<t.length&&t[i]!==">";i++)n+=t[i];return{attr:(0,c.getTagAttributes)(n)}},s.prototype.beforeParse=function(){var t=l.default.get().tagListener;if(t){var n=t(this.tagName,{parentTag:this.parentTag,prevTagName:this.prevTagName,nextTagName:this.nextTagName,isFirstSubTag:this.isFirstSubTag,attrs:this.attrs,innerHTML:this.innerHTML,match:this.match,isSelfClosing:!0}),i=n.attrs,r=n.match;this.attrs=i,this.match=r}return""},s.prototype.beforeMergeSpace=function(t){return t},s.prototype.afterMergeSpace=function(t){return t},s.prototype.beforeReturn=function(t){return t},s.prototype.exec=function(t,n){t===void 0&&(t=""),n===void 0&&(n="");var i=this.beforeParse();return i=t+(i=this.beforeMergeSpace(i))+n,i=this.afterMergeSpace(i),i=this.beforeReturn(i)},s}();e.default=p},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function l(){}return l.prototype.exec=function(){return""},l}();e.default=c},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRIPLE=e.DOUBLE=e.SINGLE=void 0,e.SINGLE="\u2608",e.DOUBLE="\u2608\u2608",e.TRIPLE="\u2608\u2608\u2608"},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(13),l={html:!0,body:!0,p:!0,div:!0,pre:!0,section:!0,blockquote:!0,aside:!0,li:!0,ul:!0,ol:!0,form:!0,hr:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,dl:!0,dd:!0,dt:!0,br:!0,table:!0};e.default=function(p){if(!p)return!1;var s=(0,c.default)(p);return!!s&&!!l[s]}},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var i=function(r,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])})(r,d)};return function(r,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function o(){this.constructor=r}i(r,d),r.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(i){for(var r,d=1,o=arguments.length;d<o;d++)for(var u in r=arguments[d])Object.prototype.hasOwnProperty.call(r,u)&&(i[u]=r[u]);return i}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.__EmptySelfClose__=e.__Empty__=void 0;var p=a(0),s=a(4),t=function(i){function r(d,o,u){return o===void 0&&(o="__empty__"),i.call(this,d,o,u)||this}return c(r,i),r.prototype.slim=function(d){return d},r.prototype.parseValidSubTag=function(d,o,u){if(this.tagName==="__skip__")return i.prototype.parseValidSubTag.call(this,d,o,u);var f=new r(d,o,l({},u));return[f.exec(),f]},r.prototype.parseOnlyString=function(d,o,u){return this.tagName==="__skip__"?i.prototype.parseOnlyString.call(this,d,o,u):[d,null]},r.prototype.exec=function(){return i.prototype.exec.call(this,"","")},r}(p.default);e.__Empty__=t;var n=function(i){function r(d,o){o===void 0&&(o="__emptyselfclose__");var u=i.call(this,d,o)||this;return u.tagName=o,u}return c(r,i),r.prototype.exec=function(){return i.prototype.exec.call(this,"","")},r}(s.default);e.__EmptySelfClose__=n},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var i=function(r,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])})(r,d)};return function(r,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function o(){this.constructor=r}i(r,d),r.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.__SkipSelfClose__=e.__Skip__=void 0;var l=a(0),p=a(4),s=a(1),t=function(i){function r(d,o,u){o===void 0&&(o="__skip__");var f=i.call(this,d,o,u)||this;return f.noNeedWrap=["td","th"],f}return c(r,i),r.prototype.exec=function(){var d=(0,s.isIndependentTag)((0,s.getRealTagName)(this.tagName))&&(!this.parentTag||!this.noNeedWrap.includes(this.parentTag)),o=d?`
`:"",u=d?`
`:"";return i.prototype.exec.call(this,o,u)},r}(l.default);e.__Skip__=t;var n=function(i){function r(d,o,u){return o===void 0&&(o="__skipselfclose__"),i.call(this,d,o,u)||this}return c(r,i),r.prototype.exec=function(){return""},r}(p.default);e.__SkipSelfClose__=n},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var n=function(i,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,o){d.__proto__=o}||function(d,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(d[u]=o[u])})(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=i}n(i,r),i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.__NoMatchSelfClose__=e.__NoMatch__=void 0;var l=a(0),p=a(4),s=function(n){function i(r,d){return d===void 0&&(d="__nomatch__"),n.call(this,r,d)||this}return c(i,n),i.prototype.beforeMergeSpace=function(r){return"<".concat(this.tagName,">").concat(r,"</").concat(this.tagName,">")},i.prototype.exec=function(){return n.prototype.exec.call(this,"","")},i}(l.default);e.__NoMatch__=s;var t=function(n){function i(r,d){return d===void 0&&(d="__nomatchselfclose__"),n.call(this,r,d)||this}return c(i,n),i.prototype.exec=function(){return"<".concat(this.tagName," />")},i}(p.default);e.__NoMatchSelfClose__=t},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c={img:!0,hr:!0,input:!0,br:!0,meta:!0,link:!0,"!doctype":!0,base:!0,col:!0,area:!0,param:!0,object:!0,embed:!0,keygen:!0,source:!0};e.default=function(l){return l!=null&&!!c[l.toLowerCase()]}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(1),l=a(7),p=function(){function s(t,n,i){n===void 0&&(n="__nomatch__");var r=i===void 0?{}:i,d=r.keepSpace,o=d!==void 0&&d,u=r.prevTagName,f=u===void 0?"":u,m=r.nextTagName,y=m===void 0?"":m,x=r.prevTagStr,w=x===void 0?"":x,E=r.prevHasEndSpace,b=E!==void 0&&E,v=r.prevHasStartSpace,T=v!==void 0&&v,O=r.parentTag,P=O===void 0?"":O,H=r.calcLeading,z=H!==void 0&&H,M=r.layer,se=M===void 0?1:M,ae=r.leadingSpace,le=ae===void 0?"":ae,fe=r.inTable,ge=fe!==void 0&&fe;this.tagName=n,this.nextTagName=y,this.prevTagName=f,this.parentTag=P,this.prevTagStr=w,this.keepSpace=o,this.calcLeading=z,this.leadingSpace=le,this.layer=se,this.rawStr=t,this.inTable=ge,this.prevHasEndSpace=b,this.prevHasStartSpace=T,this.hasEndSpace=!1,this.hasStartSpace=!1,t.startsWith(" ")&&(this.hasStartSpace=!0),t.endsWith(" ")&&(this.hasEndSpace=!0)}return s.prototype.slim=function(t){if(this.keepSpace)return t;var n=t.replace(/\s+/g," ");return(0,l.default)(this.prevTagName)&&(n=n.trimLeft()),(0,l.default)(this.nextTagName)&&(n=n.trimRight()),n},s.prototype.beforeReturn=function(t){if(this.keepSpace)return t;if(this.calcLeading)return this.leadingSpace+(0,c.extraEscape)(t);var n=(0,c.extraEscape)(t);return this.inTable&&(n=n.replace(/\|/g,"\\|")),this.prevTagName,this.prevHasEndSpace,this.prevTagStr,(0,c.isSpacePassingTag)(this.prevTagName)&&this.prevHasEndSpace&&!/^\s+/.test(t)&&!/\s+$/.test(this.prevTagStr)?" "+t:n},s.prototype.exec=function(){var t=this.rawStr;return t=this.slim(t),t=this.beforeReturn(t)},s}();e.default=p},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(2);e.default=function(l){if(!l)return l;var p=c.default.get().aliasTags;return p?.[l]!=null?p[l]:l}},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){n===void 0&&(n="strong");var r=p.call(this,t,n,i)||this;return r.layer=1,r.match=r.match||"**",r}return c(s,p),s.prototype.beforeMergeSpace=function(t){return this.match+t+this.match},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),this.match!=null&&this.prevTagStr&&!this.prevTagStr.endsWith("\\"+this.match[0])&&this.prevTagStr.endsWith(this.match[0])&&(t=" "),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="del");var i=p.call(this,t,n)||this;return i.match=i.match||"~~",i}return c(s,p),s.prototype.beforeMergeSpace=function(t){return this.match+t+this.match},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){n===void 0&&(n="em");var r=p.call(this,t,n,i)||this;return r.match=r.match||"*",r}return c(s,p),s.prototype.beforeMergeSpace=function(t){return this.match+t+this.match},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),this.parentTag==="strong"&&this.nextTagStr&&(n=" "),this.match!=null&&this.prevTagStr&&!this.prevTagStr.endsWith("\\"+this.match)&&this.prevTagStr.endsWith(this.match)&&(t=" "),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){n===void 0&&(n="th");var r=p.call(this,t,n,i)||this;return r.tagName=n,r}return c(s,p),s.prototype.beforeMergeSpace=function(t){return t+"|"},s.prototype.parseValidSubTag=function(t,n,i){return n==="ul"||n==="ol"||n==="table"||n==="pre"?[t.replace(/([\n\r])/g,""),null]:p.prototype.parseValidSubTag.call(this,t,n,i)},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unescapeStr=e.extraEscape=e.escapeStr=void 0;var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&#x60;":"`","&ldquo;":"\u201C","&rdquo;":"\u201D"},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","\u201C":"&ldquo;","\u201D":"&rdquo;"},p=/[&<>"'`\u201c\u201d]/g,s=RegExp(p.source),t=/&(?:amp|lt|gt|quot|#39|apos|#x60|ldquo|rdquo);/g,n=RegExp(t.source),i=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];e.escapeStr=function(r){return r&&s.test(r)?r.replace(p,function(d){return l[d]}):r},e.unescapeStr=function(r){return r=r&&n.test(r)?r.replace(t,function(d){return c[d]}):r},e.extraEscape=function(r){return i.reduce(function(d,o){return d.replace(o[0],o[1])},r)}},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="a"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.beforeMergeSpace=function(t){var n=this.attrs,i=n.href,r=n.title,d=i||"";return r?"[".concat(t,"](").concat(d,' "').concat(r,'")'):"[".concat(t,"](").concat(d,")")},s.prototype.parseOnlyString=function(t,n,i){return this.parentTag==="tbody"||this.parentTag==="thead"?[t,null]:p.prototype.parseOnlyString.call(this,t,n,i)},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="b"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.exec=function(t,n){return p.prototype.exec.call(this,t,n)},s}(a(14).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var i=function(r,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])})(r,d)};return function(r,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function o(){this.constructor=r}i(r,d),r.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(i){for(var r,d=1,o=arguments.length;d<o;d++)for(var u in r=arguments[d])Object.prototype.hasOwnProperty.call(r,u)&&(i[u]=r[u]);return i}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(7),s=a(0),t=a(1),n=function(i){function r(d,o,u){o===void 0&&(o="blockquote");var f=i.call(this,d,o,u)||this;return f.match=f.match||">",f.fillPerLine=f.fillPerLine.bind(f),f}return c(r,i),r.prototype.beforeMergeSpace=function(d){if(d.trim()==="")return"";var o=this.match+" "+d;return this.calcLeading?this.leadingSpace+o:o},r.prototype.afterMergeSpace=function(d){for(var o=this,u=d.split(`
`),f=u.length-1;f>=0;f--)f<u.length-1&&u[f].trim()===">"&&u[f+1].trim()===">"&&u.splice(f,1);return(u=u.map(function(m){return m===""?"":o.fillPerLine(m)})).join(`
`)},r.prototype.beforeReturn=function(d){return d.replace(`

`,`
`)},r.prototype.fillPerLine=function(d){var o=">";if(this.calcLeading&&(o=this.leadingSpace+">"),!d.startsWith(o)){var u=this.match+" "+d;return this.calcLeading?this.leadingSpace+u:u}return d},r.prototype.parseValidSubTag=function(d,o,u){var f;o==="blockquote"?f=new((0,t.getTagConstructor)(o))(d,o,l(l({},u),{calcLeading:this.calcLeading,match:this.match+">",noExtraLine:!0})):f=new((0,t.getTagConstructor)(o))(d,o,l(l({},u),{noExtraLine:!0}));var m=f.exec(),y="";this.calcLeading&&(y=this.leadingSpace);var x=(0,p.default)(u.prevTagName)&&u.prevTagName!=="br",w=(0,p.default)(u.nextTagName)&&u.nextTagName!=="br",E=(0,p.default)(o)&&o!=="br";return this.isFirstSubTag?[m.trimLeft().replace(y,""),f]:E?(m=y+this.match+m,x||(m=`
`+m),!w&&u.nextTagStr&&u.nextTagStr.trim()&&(m+=this.match+`
`),[m,f]):x?[y+this.match+`
`+m,f]:[m,f]},r.prototype.exec=function(d,o){return d===void 0&&(d=`
`),o===void 0&&(o=`
`),i.prototype.exec.call(this,d,o)},r}(s.default);e.default=n},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,d){r.__proto__=d}||function(r,d){for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(r[o]=d[o])})(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=a(4),p=a(18),s=function(t){function n(i,r,d){return r===void 0&&(r="b"),t.call(this,i,r,d)||this}return c(n,t),n.prototype.exec=function(i,r){return r===void 0&&(r=`
`),this.inTable?(0,p.escapeStr)("<br />"):"  "+r},n}(l.default);e.default=s},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var n=function(i,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,o){d.__proto__=o}||function(d,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(d[u]=o[u])})(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=i}n(i,r),i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(n){for(var i,r=1,d=arguments.length;r<d;r++)for(var o in i=arguments[r])Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o]);return n}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(1),t=function(n){function i(r,d,o){d===void 0&&(d="code");var u=n.call(this,r,d,o)||this;return u.match=u.match==null?"`":u.match,u.noWrap=u.match==="`",u.layer=1,u}return c(i,n),i.prototype.beforeMergeSpace=function(r){var d,o;return this.match!==""&&this.match!=="`"?(d=this.match+" ",o=" "+this.match):(d=this.match,o=this.match),d+r+o},i.prototype.parseValidSubTag=function(r,d,o){var u;return d==="pre"?[(u=new((0,s.getTagConstructor)(d))(r,d,l(l({},o),{language:"",match:""}))).exec("",`
`),u]:[(u=new((0,s.getTagConstructor)(d))(r,d,l(l({},o),{keepSpace:this.keepSpace,noWrap:this.noWrap}))).exec("",""),u]},i.prototype.parseOnlyString=function(r){if(this.match!==""&&r){var d=1;(r.startsWith("`")||r.endsWith("`"))&&(d=2,(r.startsWith("``")||r.endsWith("``"))&&(d=3)),this.match="`".repeat(d)}return[(0,s.unescapeStr)(r),null]},i.prototype.slim=function(r){return this.keepSpace?r:r.trim()},i.prototype.exec=function(r,d){return r===void 0&&(r=""),d===void 0&&(d=""),n.prototype.exec.call(this,r,d)},i}(p.default);e.default=t},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h1");var i=p.call(this,t,n)||this;return i.match="#",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h2");var i=p.call(this,t,n)||this;return i.match="##",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h3");var i=p.call(this,t,n)||this;return i.match="###",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h4");var i=p.call(this,t,n)||this;return i.match="####",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h5");var i=p.call(this,t,n)||this;return i.match="#####",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){n===void 0&&(n="h6");var i=p.call(this,t,n)||this;return i.match="######",i}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(3).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){n===void 0&&(n="hr");var r=p.call(this,t,n,i)||this;return r.match="---",r}return c(s,p),s.prototype.beforeMergeSpace=function(){return this.leadingSpace+this.match},s.prototype.beforeReturn=function(t){return t.replace(/^(?:\n\s*)/,`

`).replace(/(?:\n\s*)$/,`

`),t},s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),p.prototype.exec.call(this,t,n)},s}(a(4).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="i"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.exec=function(t,n){return p.prototype.exec.call(this,t,n)},s}(a(16).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="img"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.beforeMergeSpace=function(){var t=this.attrs,n=t.src,i=t.alt;return i||(i=""),n||(n=""),"![".concat(i,"](").concat(n,")")},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(4).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="input"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.beforeMergeSpace=function(){var t=this.attrs,n=t.type,i=t.checked;return this.parentTag==="li"&&n==="checkbox"?i!=null?"[x] ":"[ ] ":""},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(4).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var r=function(d,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m])})(d,o)};return function(d,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function u(){this.constructor=d}r(d,o),d.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(r){for(var d,o=1,u=arguments.length;o<u;o++)for(var f in d=arguments[o])Object.prototype.hasOwnProperty.call(d,f)&&(r[f]=d[f]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(1),t=a(7),n=a(6),i=function(r){function d(o,u,f){u===void 0&&(u="li");var m=r.call(this,o,u,f)||this;return m.match=m.match||"*",m.extraGap="",m}return c(d,r),d.prototype.beforeMergeSpace=function(o){return this.extraGap+this.leadingSpace+this.match+" "+o},d.prototype.__calcNextLeading__=function(){var o,u,f;return((o=this.match)===null||o===void 0?void 0:o.length)===1?n.DOUBLE:((u=this.match)===null||u===void 0?void 0:u.length)===2?n.TRIPLE:((f=this.match)===null||f===void 0?void 0:f.length)===3?n.DOUBLE:n.TRIPLE+n.DOUBLE},d.prototype.parseValidSubTag=function(o,u,f){var m=(0,s.getTagConstructor)(u),y=this.__calcNextLeading__(),x=new m(o,u,l(l({},f),{calcLeading:!0,leadingSpace:this.leadingSpace+y,layer:this.layer+1})),w=x.exec();return u==="p"&&(this.extraGap=`
`),this.isFirstSubTag?[w.trimLeft().replace(this.leadingSpace+y,""),x]:[w,x]},d.prototype.parseOnlyString=function(o,u,f){var m=!1;(0,t.default)(f.prevTagName)&&(m=!0);var y=this.__calcNextLeading__(),x=r.prototype.parseOnlyString.call(this,o,u,l(l({},f),{calcLeading:m,leadingSpace:this.leadingSpace+y,layer:this.layer+1})),w=x[0],E=x[1];return this.isFirstSubTag?[w.replace(this.leadingSpace+y,""),E]:[w,E]},d.prototype.beforeReturn=function(o){return r.prototype.beforeReturn.call(this,o)},d.prototype.exec=function(o,u){return o===void 0&&(o=`
`),u===void 0&&(u=`
`),r.prototype.exec.call(this,o,u)},d}(p.default);e.default=i},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var r=function(d,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m])})(d,o)};return function(d,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function u(){this.constructor=d}r(d,o),d.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(r){for(var d,o=1,u=arguments.length;o<u;o++)for(var f in d=arguments[o])Object.prototype.hasOwnProperty.call(d,f)&&(r[f]=d[f]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(5),t=a(1),n=a(2),i=function(r){function d(o,u,f){u===void 0&&(u="ol");var m,y=this;y=r.call(this,o,u,f)||this;var x=parseInt((m=y?.attrs)===null||m===void 0?void 0:m.start,10);return y.count=isNaN(x)?1:x,y}return c(d,r),d.prototype.__isValidSubTag__=function(o){if(!o)return!1;var u=n.default.get().aliasTags,f=(0,t.getTagConstructor)(o);return o==="li"||u?.[o]=="li"||f===s.default},d.prototype.getValidSubTagName=function(o){return o&&this.__isValidSubTag__(o)?o:null},d.prototype.parseValidSubTag=function(o,u,f){var m=(0,t.getTagConstructor)(u);if(this.__isValidSubTag__(u)){var y=this.count+".",x=new m(o,u,l(l({},f),{calcLeading:!0,leadingSpace:this.leadingSpace,layer:this.layer,match:y}));return this.count++,[x.exec("",`
`),x]}return["",null]},d.prototype.parseOnlyString=function(){return["",null]},d.prototype.exec=function(o,u){return o===void 0&&(o=`
`),u===void 0&&(u=`
`),r.prototype.exec.call(this,o,u)},d}(p.default);e.default=i},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="p"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.beforeMergeSpace=function(t){return this.calcLeading?this.leadingSpace+t:t},s.prototype.exec=function(t,n){return t===void 0&&(t=`
`),n===void 0&&(n=`
`),this.prevTagName||!this.prevTagStr||this.prevTagStr.endsWith(`
`)||(t=`

`),this.nextTagName||!this.nextTagStr||this.nextTagStr.startsWith(`
`)||(n=`

`),this.inTable&&(t="",n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var r=function(d,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m])})(d,o)};return function(d,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function u(){this.constructor=d}r(d,o),d.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(r){for(var d,o=1,u=arguments.length;o<u;o++)for(var f in d=arguments[o])Object.prototype.hasOwnProperty.call(d,f)&&(r[f]=d[f]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(8),t=a(1),n=a(6),i=function(r){function d(o,u,f){u===void 0&&(u="pre");var m=r.call(this,o,u,f)||this;return m.indentSpace=n.DOUBLE+n.DOUBLE,m.isIndent=m.innerHTML.includes("```"),m.match=m.isIndent?"":"```",m.language=m.language||(0,t.getLanguage)(o),m.keepSpace=!0,m}return c(d,r),d.prototype.beforeMergeSpace=function(o){var u=this.isIndent||this.parentTag==="code"?"":this.match+this.language+`
`,f="";return o.endsWith(`
`)||(f=`
`),u+o+(this.isIndent||this.parentTag==="code"?"":f+this.match)},d.prototype.fillPerLine=function(o){var u="";return this.calcLeading&&(u=this.leadingSpace),this.isIndent?u+this.indentSpace+o:u+o},d.prototype.afterMergeSpace=function(o){var u=this,f=o.split(`
`);return(f=f.map(function(m){return m===""?"":u.fillPerLine(m)})).join(`
`)},d.prototype.parseValidSubTag=function(o,u,f){if(u==="code"){var m=new((0,t.getTagConstructor)(u))(o,u,l(l({},f),{match:"",language:this.language,keepSpace:!0}));return[m.exec("",""),m]}var y=void 0;return[(y=(0,t.isSelfClosing)(u)?new s.__EmptySelfClose__(o,u):new s.__Empty__(o,u,l(l({},f),{keepSpace:!0}))).exec(),y]},d.prototype.parseOnlyString=function(o){return[o,null]},d.prototype.slim=function(o){return o},d.prototype.exec=function(o,u){return o===void 0&&(o=`
`),u===void 0&&(u=`
`),r.prototype.exec.call(this,o,u)},d}(p.default);e.default=i},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n){return n===void 0&&(n="s"),p.call(this,t,n)||this}return c(s,p),s.prototype.exec=function(t,n){return p.prototype.exec.call(this,t,n)},s}(a(15).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="span"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var n=function(i,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,o){d.__proto__=o}||function(d,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(d[u]=o[u])})(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function d(){this.constructor=i}n(i,r),i.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(n){for(var i,r=1,d=arguments.length;r<d;r++)for(var o in i=arguments[r])Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o]);return n}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(1),t=function(n){function i(r,d,o){d===void 0&&(d="table");var u=n.call(this,r,d,o)||this;return u.exist_thead=!1,u.exist_tbody=!1,u.empty_tbody=!0,u.tableColumnCount=function(f){for(var m="",y=0;y<f.length&&!m.endsWith("</tr>");y++)m+=f[y];return Math.max(m.split("</td>").length-1,m.split("</th>").length-1)}(u.innerHTML),u}return c(i,n),i.prototype.parseValidSubTag=function(r,d,o){d==="thead"&&(this.exist_thead=!0),d==="tbody"&&(this.exist_tbody=!0,this.empty_tbody=!1),d==="tr"&&(this.empty_tbody=!1);var u=new((0,s.getTagConstructor)(d))(r,d,l(l({},o),{tableColumnCount:this.tableColumnCount,inTable:!0}));return[u.exec("",`
`),u]},i.prototype.parseOnlyString=function(){return["",null]},i.prototype.beforeReturn=function(r){if(!this.exist_thead&&!this.exist_tbody&&this.empty_tbody||this.tableColumnCount===0)return"";if(!this.exist_tbody){for(var d=(0,s.getTableAlign)(this.innerHTML,this.tableColumnCount),o=this.leadingSpace+"|",u=0;u<d.length;u++)o+=d[u];r=this.empty_tbody?r+o+`
`:o+""+r}return this.exist_thead||(r=`
`+this.leadingSpace+"|".repeat(this.tableColumnCount+1)+(r.startsWith(`
`)?"":`
`)+r),r},i.prototype.exec=function(r,d){return r===void 0&&(r=`
`),d===void 0&&(d=`
`),n.prototype.exec.call(this,r,d)},i}(p.default);e.default=t},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,d){r.__proto__=d}||function(r,d){for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(r[o]=d[o])})(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=a(0),p=a(1),s=function(t){function n(i,r,d){return r===void 0&&(r="tbody"),t.call(this,i,r,d)||this}return c(n,t),n.prototype.beforeMergeSpace=function(i){for(var r=(0,p.getTableAlign)(this.innerHTML,this.tableColumnCount),d=this.leadingSpace+"|",o=0;o<r.length;o++)d+=r[o];return d+`
`+i},n.prototype.parseOnlyString=function(){return["",null]},n.prototype.exec=function(i,r){return i===void 0&&(i=""),r===void 0&&(r=""),t.prototype.exec.call(this,i,r)},n}(l.default);e.default=s},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="td"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.parseValidSubTag=function(t,n,i){return n==="ul"||n==="ol"||n==="table"||n==="pre"?[t.replace(/([\n\r])/g,""),null]:p.prototype.parseValidSubTag.call(this,t,n,i)},s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(17).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var p=function(s,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])})(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}p(s,t),s.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(p){function s(t,n,i){return n===void 0&&(n="thead"),p.call(this,t,n,i)||this}return c(s,p),s.prototype.exec=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),p.prototype.exec.call(this,t,n)},s}(a(0).default);e.default=l},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var i=function(r,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])})(r,d)};return function(r,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function o(){this.constructor=r}i(r,d),r.prototype=d===null?Object.create(d):(o.prototype=d.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=a(0),p=a(5),s=a(1),t=a(2),n=function(i){function r(d,o,u){return o===void 0&&(o="tr"),i.call(this,d,o,u)||this}return c(r,i),r.prototype.beforeMergeSpace=function(d){return this.leadingSpace+"|"+d},r.prototype.parseValidSubTag=function(d,o,u){var f=t.default.get().aliasTags,m=(0,s.getTagConstructor)(o);if(o!=="td"&&o!=="th"&&f?.[o]!=="td"&&f?.[o]!=="th"&&m!==p.default)return"Should not have tags except <td> or <th> inside <tr>, current tag is ".concat(o," have been ignore."),["",null];var y=new m(d,o,u);return[y.exec("",""),y]},r.prototype.parseOnlyString=function(){return["",null]},r.prototype.exec=function(d,o){return d===void 0&&(d=""),o===void 0&&(o=`
`),i.prototype.exec.call(this,d,o)},r}(l.default);e.default=n},function(h,e,a){"use strict";var c=this&&this.__extends||function(){var r=function(d,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m])})(d,o)};return function(d,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function u(){this.constructor=d}r(d,o),d.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}}(),l=this&&this.__assign||function(){return(l=Object.assign||function(r){for(var d,o=1,u=arguments.length;o<u;o++)for(var f in d=arguments[o])Object.prototype.hasOwnProperty.call(d,f)&&(r[f]=d[f]);return r}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var p=a(0),s=a(5),t=a(1),n=a(2).default.get().aliasTags,i=function(r){function d(o,u,f){return u===void 0&&(u="ul"),r.call(this,o,u,f)||this}return c(d,r),d.prototype.__isValidSubTag__=function(o){if(!o)return!1;var u=(0,t.getTagConstructor)(o);return o==="li"||n?.[o]=="li"||u===s.default},d.prototype.getValidSubTagName=function(o){return o&&this.__isValidSubTag__(o)?o:null},d.prototype.parseValidSubTag=function(o,u,f){var m=(0,t.getTagConstructor)(u);if(this.__isValidSubTag__(u)){var y=new m(o,u,l(l({},f),{calcLeading:!0,leadingSpace:this.leadingSpace,layer:this.layer,match:"*"}));return[y.exec("",`
`),y]}return["",null]},d.prototype.parseOnlyString=function(){return["",null]},d.prototype.exec=function(o,u){return o===void 0&&(o=`
`),u===void 0&&(u=`
`),r.prototype.exec.call(this,o,u)},d}(p.default);e.default=i},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(1),l=a(2),p=a(6);e.default=function(s,t,n){n===void 0&&(n=!1),l.default.reset(),l.default.set(t,n),s=(s=(s=(0,c.clearComment)(s)).trim()).replace(/(\r\n)/g,"").replace(/&nbsp;/g," "),s="<".concat(p.DOUBLE,"skip").concat(p.DOUBLE,">").concat(s,"</").concat(p.DOUBLE,"skip").concat(p.DOUBLE,">");var i="",r="".concat(p.DOUBLE,"skip").concat(p.DOUBLE),d=s;return i+=new((0,c.getTagConstructor)(r))(d,r,{parentTag:null,prevTagName:null,prevTagStr:i}).exec(),function(o){return o=(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/\u2608/g," ")}((0,c.unescapeStr)(i))}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(11);function l(p,s){for(var t="";s<p.length&&/[a-zA-Z0-9!\-_]/.test(p[s]);)t+=p[s++];return t.toLowerCase()}e.default=function(p){var s=0;return function(){var t="",n=null,i=0,r=null,d=!1;if(s>=p.length)return[n,t];for(var o=s;o<p.length;o++){if(p[o]==="<"&&p[o+1]!=="/"){if(t!==""&&n==null&&!d)return s=o,[n,t];var u=l(p,o+1);n==null&&(n=u),n===u&&i++,(0,c.default)(n)&&(--i===0&&(d=!0),i<0&&"Tag ".concat(n," is abnormal"))}else if(p[o]==="<"&&p[o+1]==="/"){if(n==null){"Tag is not integrity, current tagStr is ".concat(p.slice(s));for(var f=o;f<p.length&&p[f]!==">";)f++;o=f;continue}n===(r=l(p,o+2))&&i--,i<=0&&(d=!0)}if(t+=p[o],p[o]===">"&&d)return s=o+1,[n,t];o===p.length-1&&n!==r&&(r!=null&&n!=null&&(t=t.replace("<".concat(n,">"),"").replace("</".concat(r,">"),"")),n=null)}return s=p.length,[n,t]}}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(2),l=a(6),p=a(11),s=a(49);e.default=function t(n){var i,r=c.default.get(),d=r.skipTags,o=r.emptyTags,u=r.ignoreTags,f=r.aliasTags,m=r.renderCustomTags,y=(0,p.default)(n);if(d?.includes(n)||n==="".concat(l.DOUBLE,"skip").concat(l.DOUBLE)){var x=a(9);return y?x.__SkipSelfClose__:x.__Skip__}if(o?.includes(n)){var w=a(8);return y?w.__EmptySelfClose__:w.__Empty__}if(u?.includes(n))return a(5).default;if(f?.[n]!=null)return t(f[n]);var E=n.toLowerCase();if(m!==!0&&!(0,s.default)(E)){if(m===!1||m==="SKIP")return x=a(9),y?x.__SkipSelfClose__:x.__Skip__;if(m==="EMPTY")return w=a(8),y?w.__EmptySelfClose__:w.__Empty__;if(m==="IGNORE")return a(5).default}try{i=a(50)("./".concat(n)).default}catch{i=y?a(10).__NoMatchSelfClose__:a(10).__NoMatch__}return i}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=["!doctype","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","circle","cite","clipPath","code","col","colgroup","command","content","data","datalist","dd","defs","del","details","dfn","dialog","dir","div","dl","dt","element","ellipse","em","embed","fieldset","figcaption","figure","font","footer","foreignObject","form","frame","frameset","g","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","line","linearGradient","link","listing","main","map","mark","marquee","mask","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","path","pattern","picture","plaintext","polygon","polyline","pre","progress","q","radialGradient","rb","rbc","rect","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","stop","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tspan","tt","u","ul","var","video","wbr","xmp"];e.default=function(l){return typeof l=="string"&&c.includes(l.toLowerCase())}},function(h,e,a){var c={"./__Heading__":3,"./__Heading__.ts":3,"./__empty__":8,"./__empty__.ts":8,"./__ignore__":5,"./__ignore__.ts":5,"./__nomatch__":10,"./__nomatch__.ts":10,"./__rawString__":12,"./__rawString__.ts":12,"./__skip__":9,"./__skip__.ts":9,"./a":19,"./a.ts":19,"./b":20,"./b.ts":20,"./blockquote":21,"./blockquote.ts":21,"./br":22,"./br.ts":22,"./code":23,"./code.ts":23,"./del":15,"./del.ts":15,"./em":16,"./em.ts":16,"./h1":24,"./h1.ts":24,"./h2":25,"./h2.ts":25,"./h3":26,"./h3.ts":26,"./h4":27,"./h4.ts":27,"./h5":28,"./h5.ts":28,"./h6":29,"./h6.ts":29,"./hr":30,"./hr.ts":30,"./i":31,"./i.ts":31,"./img":32,"./img.ts":32,"./input":33,"./input.ts":33,"./li":34,"./li.ts":34,"./ol":35,"./ol.ts":35,"./p":36,"./p.ts":36,"./pre":37,"./pre.ts":37,"./s":38,"./s.ts":38,"./span":39,"./span.ts":39,"./strong":14,"./strong.ts":14,"./table":40,"./table.ts":40,"./tbody":41,"./tbody.ts":41,"./td":42,"./td.ts":42,"./th":17,"./th.ts":17,"./thead":43,"./thead.ts":43,"./tr":44,"./tr.ts":44,"./ul":45,"./ul.ts":45};function l(s){var t=p(s);return a(t)}function p(s){if(!a.o(c,s)){var t=new Error("Cannot find module '"+s+"'");throw t.code="MODULE_NOT_FOUND",t}return c[s]}l.keys=function(){return Object.keys(c)},l.resolve=p,h.exports=l,l.id=50},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c){for(var l={},p=!1,s="",t="",n=null,i=0;i<=c.length;i++){if(i===c.length||/\s/.test(c[i])){if(i===c.length||!p){var r=s.trim();r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),r&&(l[r]=t.trim()),s="",t=""}}else{if(/['"]/.test(c[i])&&(!n||c[i]===n)){(p=!p)&&(n=c[i]);continue}if(c[i]==="="&&!p)continue}if(i===c.length)break;p?t+=c[i]:s+=c[i]}return l}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c="javascript";e.default=function(l){var p=l.match(/<.*?class=".*?language-([^\s"]*)?.*".*>/);return p?p[1]||"":l.match(/<span.*?hljs-(comment|keyword|number|string|literal|built_in|function|title|bullet).*?<\/span>/)?c:""}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c){return c.replace(/<!--(?:[\s\S]*?)-->/g,"")}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(13),l={b:!0,a:!0,del:!0,em:!0,i:!0,s:!0,span:!0,strong:!0};e.default=function(p){if(p===null)return!0;if(!p)return!1;var s=(0,c.default)(p);return!!s&&!!l[s]}},function(h,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,l){var p={_default_:"---|",center:":---:|",left:":---|",right:"---:|",start:":---|",end:"---:|"},s=Array(l).fill(p._default_),t=c.match(/<(td|th)(.*?)>/g);return t?s=(s=t.slice(0,l)).map(function(n){var i=n.match(/align\s*=\s*['"]\s*(center|left|right|start|end)/),r=n.match(/text-align\s*:\s*(center|left|right|start|end)/);return i||r?i&&!r?p[i[1]]||p._default_:r?p[r[1]]||p._default_:void 0:p._default_}):s}}]).default})});var{entries:fn,setPrototypeOf:rn,isFrozen:ei,getPrototypeOf:ti,getOwnPropertyDescriptor:ni}=Object,{freeze:W,seal:Z,create:gn}=Object,{apply:kt,construct:St}=typeof Reflect<"u"&&Reflect;W||(W=function(e){return e});Z||(Z=function(e){return e});kt||(kt=function(e,a,c){return e.apply(a,c)});St||(St=function(e,a){return new e(...a)});var Je=q(Array.prototype.forEach),ii=q(Array.prototype.lastIndexOf),sn=q(Array.prototype.pop),Be=q(Array.prototype.push),oi=q(Array.prototype.splice),tt=q(String.prototype.toLowerCase),bt=q(String.prototype.toString),an=q(String.prototype.match),ze=q(String.prototype.replace),ri=q(String.prototype.indexOf),si=q(String.prototype.trim),Y=q(Object.prototype.hasOwnProperty),U=q(RegExp.prototype.test),He=ai(TypeError);function q(h){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];return kt(h,e,c)}}function ai(h){return function(){for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return St(h,a)}}function A(h,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tt;rn&&rn(h,null);let c=e.length;for(;c--;){let l=e[c];if(typeof l=="string"){let p=a(l);p!==l&&(ei(e)||(e[c]=p),l=p)}h[l]=!0}return h}function li(h){for(let e=0;e<h.length;e++)Y(h,e)||(h[e]=null);return h}function ie(h){let e=gn(null);for(let[a,c]of fn(h))Y(h,a)&&(Array.isArray(c)?e[a]=li(c):c&&typeof c=="object"&&c.constructor===Object?e[a]=ie(c):e[a]=c);return e}function $e(h,e){for(;h!==null;){let c=ni(h,e);if(c){if(c.get)return q(c.get);if(typeof c.value=="function")return q(c.value)}h=ti(h)}function a(){return null}return a}var ln=W(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vt=W(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xt=W(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ci=W(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wt=W(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pi=W(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cn=W(["#text"]),pn=W(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Tt=W(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),un=W(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),et=W(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ui=Z(/\{\{[\w\W]*|[\w\W]*\}\}/gm),di=Z(/<%[\w\W]*|[\w\W]*%>/gm),hi=Z(/\$\{[\w\W]*/gm),fi=Z(/^data-[\-\w.\u00B7-\uFFFF]+$/),gi=Z(/^aria-[\-\w]+$/),mn=Z(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mi=Z(/^(?:\w+script|data):/i),yi=Z(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yn=Z(/^html$/i),_i=Z(/^[a-z][.\w]*(-[.\w]+)+$/i),dn=Object.freeze({__proto__:null,ARIA_ATTR:gi,ATTR_WHITESPACE:yi,CUSTOM_ELEMENT:_i,DATA_ATTR:fi,DOCTYPE_NAME:yn,ERB_EXPR:di,IS_ALLOWED_URI:mn,IS_SCRIPT_OR_DATA:mi,MUSTACHE_EXPR:ui,TMPLIT_EXPR:hi}),Fe={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},bi=function(){return typeof window>"u"?null:window},vi=function(e,a){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let c=null,l="data-tt-policy-suffix";a&&a.hasAttribute(l)&&(c=a.getAttribute(l));let p="dompurify"+(c?"#"+c:"");try{return e.createPolicy(p,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+p+" could not be created."),null}},hn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function _n(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bi(),e=S=>_n(S);if(e.version="3.2.6",e.removed=[],!h||!h.document||h.document.nodeType!==Fe.document||!h.Element)return e.isSupported=!1,e;let{document:a}=h,c=a,l=c.currentScript,{DocumentFragment:p,HTMLTemplateElement:s,Node:t,Element:n,NodeFilter:i,NamedNodeMap:r=h.NamedNodeMap||h.MozNamedAttrMap,HTMLFormElement:d,DOMParser:o,trustedTypes:u}=h,f=n.prototype,m=$e(f,"cloneNode"),y=$e(f,"remove"),x=$e(f,"nextSibling"),w=$e(f,"childNodes"),E=$e(f,"parentNode");if(typeof s=="function"){let S=a.createElement("template");S.content&&S.content.ownerDocument&&(a=S.content.ownerDocument)}let b,v="",{implementation:T,createNodeIterator:O,createDocumentFragment:P,getElementsByTagName:H}=a,{importNode:z}=c,M=hn();e.isSupported=typeof fn=="function"&&typeof E=="function"&&T&&T.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:se,ERB_EXPR:ae,TMPLIT_EXPR:le,DATA_ATTR:fe,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:pt,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:ut}=dn,{IS_ALLOWED_URI:Oe}=dn,N=null,Ae=A({},[...ln,...vt,...xt,...wt,...cn]),j=null,Ce=A({},[...pn,...Tt,...un,...et]),I=Object.seal(gn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,Le=null,Me=!0,Re=!0,Pe=!1,Ze=!0,J=!1,me=!0,X=!1,Ie=!1,ye=!1,pe=!1,ue=!1,_e=!1,be=!0,Ht=!1,Bn="user-content-",dt=!0,Ne=!1,ve={},xe=null,$t=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ft=null,Ut=A({},["audio","video","img","source","image","track"]),ht=null,Wt=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",ee="http://www.w3.org/1999/xhtml",we=ee,ft=!1,gt=null,zn=A({},[Ye,Xe,ee],bt),Ke=A({},["mi","mo","mn","ms","mtext"]),Qe=A({},["annotation-xml"]),Hn=A({},["title","style","font","a","script"]),je=null,$n=["application/xhtml+xml","text/html"],Fn="text/html",B=null,Te=null,Un=a.createElement("form"),qt=function(g){return g instanceof RegExp||g instanceof Function},mt=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Te&&Te===g)){if((!g||typeof g!="object")&&(g={}),g=ie(g),je=$n.indexOf(g.PARSER_MEDIA_TYPE)===-1?Fn:g.PARSER_MEDIA_TYPE,B=je==="application/xhtml+xml"?bt:tt,N=Y(g,"ALLOWED_TAGS")?A({},g.ALLOWED_TAGS,B):Ae,j=Y(g,"ALLOWED_ATTR")?A({},g.ALLOWED_ATTR,B):Ce,gt=Y(g,"ALLOWED_NAMESPACES")?A({},g.ALLOWED_NAMESPACES,bt):zn,ht=Y(g,"ADD_URI_SAFE_ATTR")?A(ie(Wt),g.ADD_URI_SAFE_ATTR,B):Wt,Ft=Y(g,"ADD_DATA_URI_TAGS")?A(ie(Ut),g.ADD_DATA_URI_TAGS,B):Ut,xe=Y(g,"FORBID_CONTENTS")?A({},g.FORBID_CONTENTS,B):$t,ce=Y(g,"FORBID_TAGS")?A({},g.FORBID_TAGS,B):ie({}),Le=Y(g,"FORBID_ATTR")?A({},g.FORBID_ATTR,B):ie({}),ve=Y(g,"USE_PROFILES")?g.USE_PROFILES:!1,Me=g.ALLOW_ARIA_ATTR!==!1,Re=g.ALLOW_DATA_ATTR!==!1,Pe=g.ALLOW_UNKNOWN_PROTOCOLS||!1,Ze=g.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=g.SAFE_FOR_TEMPLATES||!1,me=g.SAFE_FOR_XML!==!1,X=g.WHOLE_DOCUMENT||!1,pe=g.RETURN_DOM||!1,ue=g.RETURN_DOM_FRAGMENT||!1,_e=g.RETURN_TRUSTED_TYPE||!1,ye=g.FORCE_BODY||!1,be=g.SANITIZE_DOM!==!1,Ht=g.SANITIZE_NAMED_PROPS||!1,dt=g.KEEP_CONTENT!==!1,Ne=g.IN_PLACE||!1,Oe=g.ALLOWED_URI_REGEXP||mn,we=g.NAMESPACE||ee,Ke=g.MATHML_TEXT_INTEGRATION_POINTS||Ke,Qe=g.HTML_INTEGRATION_POINTS||Qe,I=g.CUSTOM_ELEMENT_HANDLING||{},g.CUSTOM_ELEMENT_HANDLING&&qt(g.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=g.CUSTOM_ELEMENT_HANDLING.tagNameCheck),g.CUSTOM_ELEMENT_HANDLING&&qt(g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),g.CUSTOM_ELEMENT_HANDLING&&typeof g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(I.allowCustomizedBuiltInElements=g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Re=!1),ue&&(pe=!0),ve&&(N=A({},cn),j=[],ve.html===!0&&(A(N,ln),A(j,pn)),ve.svg===!0&&(A(N,vt),A(j,Tt),A(j,et)),ve.svgFilters===!0&&(A(N,xt),A(j,Tt),A(j,et)),ve.mathMl===!0&&(A(N,wt),A(j,un),A(j,et))),g.ADD_TAGS&&(N===Ae&&(N=ie(N)),A(N,g.ADD_TAGS,B)),g.ADD_ATTR&&(j===Ce&&(j=ie(j)),A(j,g.ADD_ATTR,B)),g.ADD_URI_SAFE_ATTR&&A(ht,g.ADD_URI_SAFE_ATTR,B),g.FORBID_CONTENTS&&(xe===$t&&(xe=ie(xe)),A(xe,g.FORBID_CONTENTS,B)),dt&&(N["#text"]=!0),X&&A(N,["html","head","body"]),N.table&&(A(N,["tbody"]),delete ce.tbody),g.TRUSTED_TYPES_POLICY){if(typeof g.TRUSTED_TYPES_POLICY.createHTML!="function")throw He('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof g.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw He('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=g.TRUSTED_TYPES_POLICY,v=b.createHTML("")}else b===void 0&&(b=vi(u,l)),b!==null&&typeof v=="string"&&(v=b.createHTML(""));W&&W(g),Te=g}},Gt=A({},[...vt,...xt,...ci]),Vt=A({},[...wt,...pi]),Wn=function(g){let _=E(g);(!_||!_.tagName)&&(_={namespaceURI:we,tagName:"template"});let k=tt(g.tagName),R=tt(_.tagName);return gt[g.namespaceURI]?g.namespaceURI===Xe?_.namespaceURI===ee?k==="svg":_.namespaceURI===Ye?k==="svg"&&(R==="annotation-xml"||Ke[R]):!!Gt[k]:g.namespaceURI===Ye?_.namespaceURI===ee?k==="math":_.namespaceURI===Xe?k==="math"&&Qe[R]:!!Vt[k]:g.namespaceURI===ee?_.namespaceURI===Xe&&!Qe[R]||_.namespaceURI===Ye&&!Ke[R]?!1:!Vt[k]&&(Hn[k]||!Gt[k]):!!(je==="application/xhtml+xml"&&gt[g.namespaceURI]):!1},K=function(g){Be(e.removed,{element:g});try{E(g).removeChild(g)}catch{y(g)}},ke=function(g,_){try{Be(e.removed,{attribute:_.getAttributeNode(g),from:_})}catch{Be(e.removed,{attribute:null,from:_})}if(_.removeAttribute(g),g==="is")if(pe||ue)try{K(_)}catch{}else try{_.setAttribute(g,"")}catch{}},Zt=function(g){let _=null,k=null;if(ye)g="<remove></remove>"+g;else{let D=an(g,/^[\r\n\t ]+/);k=D&&D[0]}je==="application/xhtml+xml"&&we===ee&&(g='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+g+"</body></html>");let R=b?b.createHTML(g):g;if(we===ee)try{_=new o().parseFromString(R,je)}catch{}if(!_||!_.documentElement){_=T.createDocument(we,"template",null);try{_.documentElement.innerHTML=ft?v:R}catch{}}let $=_.body||_.documentElement;return g&&k&&$.insertBefore(a.createTextNode(k),$.childNodes[0]||null),we===ee?H.call(_,X?"html":"body")[0]:X?_.documentElement:$},Yt=function(g){return O.call(g.ownerDocument||g,g,i.SHOW_ELEMENT|i.SHOW_COMMENT|i.SHOW_TEXT|i.SHOW_PROCESSING_INSTRUCTION|i.SHOW_CDATA_SECTION,null)},yt=function(g){return g instanceof d&&(typeof g.nodeName!="string"||typeof g.textContent!="string"||typeof g.removeChild!="function"||!(g.attributes instanceof r)||typeof g.removeAttribute!="function"||typeof g.setAttribute!="function"||typeof g.namespaceURI!="string"||typeof g.insertBefore!="function"||typeof g.hasChildNodes!="function")},Xt=function(g){return typeof t=="function"&&g instanceof t};function te(S,g,_){Je(S,k=>{k.call(e,g,_,Te)})}let Kt=function(g){let _=null;if(te(M.beforeSanitizeElements,g,null),yt(g))return K(g),!0;let k=B(g.nodeName);if(te(M.uponSanitizeElement,g,{tagName:k,allowedTags:N}),me&&g.hasChildNodes()&&!Xt(g.firstElementChild)&&U(/<[/\w!]/g,g.innerHTML)&&U(/<[/\w!]/g,g.textContent)||g.nodeType===Fe.progressingInstruction||me&&g.nodeType===Fe.comment&&U(/<[/\w]/g,g.data))return K(g),!0;if(!N[k]||ce[k]){if(!ce[k]&&Jt(k)&&(I.tagNameCheck instanceof RegExp&&U(I.tagNameCheck,k)||I.tagNameCheck instanceof Function&&I.tagNameCheck(k)))return!1;if(dt&&!xe[k]){let R=E(g)||g.parentNode,$=w(g)||g.childNodes;if($&&R){let D=$.length;for(let V=D-1;V>=0;--V){let ne=m($[V],!0);ne.__removalCount=(g.__removalCount||0)+1,R.insertBefore(ne,x(g))}}}return K(g),!0}return g instanceof n&&!Wn(g)||(k==="noscript"||k==="noembed"||k==="noframes")&&U(/<\/no(script|embed|frames)/i,g.innerHTML)?(K(g),!0):(J&&g.nodeType===Fe.text&&(_=g.textContent,Je([se,ae,le],R=>{_=ze(_,R," ")}),g.textContent!==_&&(Be(e.removed,{element:g.cloneNode()}),g.textContent=_)),te(M.afterSanitizeElements,g,null),!1)},Qt=function(g,_,k){if(be&&(_==="id"||_==="name")&&(k in a||k in Un))return!1;if(!(Re&&!Le[_]&&U(fe,_))){if(!(Me&&U(ge,_))){if(!j[_]||Le[_]){if(!(Jt(g)&&(I.tagNameCheck instanceof RegExp&&U(I.tagNameCheck,g)||I.tagNameCheck instanceof Function&&I.tagNameCheck(g))&&(I.attributeNameCheck instanceof RegExp&&U(I.attributeNameCheck,_)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(_))||_==="is"&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&U(I.tagNameCheck,k)||I.tagNameCheck instanceof Function&&I.tagNameCheck(k))))return!1}else if(!ht[_]){if(!U(Oe,ze(k,Ee,""))){if(!((_==="src"||_==="xlink:href"||_==="href")&&g!=="script"&&ri(k,"data:")===0&&Ft[g])){if(!(Pe&&!U(pt,ze(k,Ee,"")))){if(k)return!1}}}}}}return!0},Jt=function(g){return g!=="annotation-xml"&&an(g,ut)},en=function(g){te(M.beforeSanitizeAttributes,g,null);let{attributes:_}=g;if(!_||yt(g))return;let k={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j,forceKeepAttr:void 0},R=_.length;for(;R--;){let $=_[R],{name:D,namespaceURI:V,value:ne}=$,De=B(D),_t=ne,F=D==="value"?_t:si(_t);if(k.attrName=De,k.attrValue=F,k.keepAttr=!0,k.forceKeepAttr=void 0,te(M.uponSanitizeAttribute,g,k),F=k.attrValue,Ht&&(De==="id"||De==="name")&&(ke(D,g),F=Bn+F),me&&U(/((--!?|])>)|<\/(style|title)/i,F)){ke(D,g);continue}if(k.forceKeepAttr)continue;if(!k.keepAttr){ke(D,g);continue}if(!Ze&&U(/\/>/i,F)){ke(D,g);continue}J&&Je([se,ae,le],nn=>{F=ze(F,nn," ")});let tn=B(g.nodeName);if(!Qt(tn,De,F)){ke(D,g);continue}if(b&&typeof u=="object"&&typeof u.getAttributeType=="function"&&!V)switch(u.getAttributeType(tn,De)){case"TrustedHTML":{F=b.createHTML(F);break}case"TrustedScriptURL":{F=b.createScriptURL(F);break}}if(F!==_t)try{V?g.setAttributeNS(V,D,F):g.setAttribute(D,F),yt(g)?K(g):sn(e.removed)}catch{ke(D,g)}}te(M.afterSanitizeAttributes,g,null)},qn=function S(g){let _=null,k=Yt(g);for(te(M.beforeSanitizeShadowDOM,g,null);_=k.nextNode();)te(M.uponSanitizeShadowNode,_,null),Kt(_),en(_),_.content instanceof p&&S(_.content);te(M.afterSanitizeShadowDOM,g,null)};return e.sanitize=function(S){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=null,k=null,R=null,$=null;if(ft=!S,ft&&(S="<!-->"),typeof S!="string"&&!Xt(S))if(typeof S.toString=="function"){if(S=S.toString(),typeof S!="string")throw He("dirty is not a string, aborting")}else throw He("toString is not a function");if(!e.isSupported)return S;if(Ie||mt(g),e.removed=[],typeof S=="string"&&(Ne=!1),Ne){if(S.nodeName){let ne=B(S.nodeName);if(!N[ne]||ce[ne])throw He("root node is forbidden and cannot be sanitized in-place")}}else if(S instanceof t)_=Zt("<!---->"),k=_.ownerDocument.importNode(S,!0),k.nodeType===Fe.element&&k.nodeName==="BODY"||k.nodeName==="HTML"?_=k:_.appendChild(k);else{if(!pe&&!J&&!X&&S.indexOf("<")===-1)return b&&_e?b.createHTML(S):S;if(_=Zt(S),!_)return pe?null:_e?v:""}_&&ye&&K(_.firstChild);let D=Yt(Ne?S:_);for(;R=D.nextNode();)Kt(R),en(R),R.content instanceof p&&qn(R.content);if(Ne)return S;if(pe){if(ue)for($=P.call(_.ownerDocument);_.firstChild;)$.appendChild(_.firstChild);else $=_;return(j.shadowroot||j.shadowrootmode)&&($=z.call(c,$,!0)),$}let V=X?_.outerHTML:_.innerHTML;return X&&N["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&U(yn,_.ownerDocument.doctype.name)&&(V="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+V),J&&Je([se,ae,le],ne=>{V=ze(V,ne," ")}),b&&_e?b.createHTML(V):V},e.setConfig=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mt(S),Ie=!0},e.clearConfig=function(){Te=null,Ie=!1},e.isValidAttribute=function(S,g,_){Te||mt({});let k=B(S),R=B(g);return Qt(k,R,_)},e.addHook=function(S,g){typeof g=="function"&&Be(M[S],g)},e.removeHook=function(S,g){if(g!==void 0){let _=ii(M[S],g);return _===-1?void 0:oi(M[S],_,1)[0]}return sn(M[S])},e.removeHooks=function(S){M[S]=[]},e.removeAllHooks=function(){M=hn()},e}var Se=_n();var Dn=Jn(bn());var vn=`
    #psw-chat-widget-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 10000;
        font-family: Arial, sans-serif;
        font-size: 20px;
    }

    #psw-chat-widget-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 0 20px;
        min-width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #00004d 0%, #000066 100%);
        color: white;
        border: none;
        border-radius: 50px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow:  0 8px 25px rgba(0, 0, 102, 0.3),0 2px 10px rgba(0, 0, 0, 0.1);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10000;
        white-space: nowrap;
        overflow: hidden;
        backdrop-filter: blur(10px);
        user-select: none;
        -webkit-tap-highlight-color: transparent;
    }

    #psw-chat-widget-button:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow:  0 12px 35px rgba(0, 0, 102, 0.4),0 4px 15px rgba(0, 0, 0, 0.15);
        background: linear-gradient(135deg, #000066 0%, #000099 100%);
    }

    #psw-chat-widget-button:active {
        transform: translateY(0) scale(0.98);
        box-shadow: 0 12px 35px rgba(0, 0, 102, 0.4),0 4px 15px rgba(0, 0, 0, 0.15);
        transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #psw-chat-widget-button:focus {
        outline: none;
        box-shadow: 0 8px 25px rgba(0, 0, 102, 0.3),0 0 0 3px rgba(0, 0, 102, 0.2);
    }

    /* Pulse animation for attention */
    #psw-chat-widget-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        background: #000066;
        animation: pulse 2s infinite;
        z-index: -1;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
            opacity: 1;
        }
        100% {
            transform: scale(1.3);
            opacity: 0;
        }
    }

    /* Responsive design */
    @media (max-width: 768px) {
        #psw-chat-widget-button {
            bottom: 20px;
            right: 15px;
            min-width: 55px;
            height: 55px;
            font-size: 14px;
            padding: 0 16px;
        }
    }

    @media (max-width: 480px) {
        #psw-chat-widget-button {
            bottom: 15px;
            right: 15px;
            min-width: 50px;
            height: 50px;
            font-size: 13px;
            padding: 0 14px;
        }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
        #psw-chat-widget-button {
            box-shadow:  0 12px 35px rgba(0, 0, 102, 0.4),0 4px 15px rgba(0, 0, 0, 0.15);
        background: linear-gradient(135deg, #000066 0%, #000099 100%);
        }

        #psw-chat-widget-button:hover {
             box-shadow:  0 12px 35px rgba(0, 0, 102, 0.4),0 4px 15px rgba(0, 0, 0, 0.15);
        background: linear-gradient(135deg, #000066 0%, #000099 100%);
            
        }
    }

    /* Smooth entrance animation */
    #psw-chat-widget-button {
        animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideIn {
        0% {
            transform: translateY(100px) scale(0.8);
            opacity: 0;
        }
        100% {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
    }

    /* Optional: Add a subtle glow effect */
    #psw-chat-widget-button {
        position: relative;
        overflow: visible;
    }

    #psw-chat-widget-button::after {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border-radius: 52px;
        background: linear-gradient(135deg, #000066 0%, #000099 100%);
        z-index: -1;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    #psw-chat-widget-button:hover::after {
        opacity: 1;
    }

    #psw-chat-widget {
        display: none;
        width: 450px;
        height: 70vh;
        max-height: 600px;
        min-height: 400px;
        background-color: white; 
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        flex-direction: column;
        margin-bottom: 15px;
    }

    #psw-chat-header {
        background-color: #000066;
        color: white;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        line-height: normal !important;
        flex-direction: row-reverse;
    }

    #psw-chat-actions {
        display: flex;
        gap: 10px;
    }

    #psw-exit-chat,
    #psw-close-chat {
        cursor: pointer;
        font-size: 22px;
    }

    #psw-chat-title {
        font-weight: bold;
        font-size: 16px;
    }

    #psw-chat-messages {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        scroll-behavior: smooth;
        line-height: normal !important;
        direction: rtl;
    }
        .scroll-wrapper {
    overflow-y: auto;
    height: 100%;
    direction: ltr; /* scrollbar stays on right */
}

    .psw-message {
        max-width: 80%;
        padding: 10px 15px;
        border-radius: 18px;
        margin-bottom: 5px;
        word-wrap: break-word;
        text-align: right; /* Align text to the right */
 
    }

    .psw-user-message {
        background-color: #d4d4e7;
        align-self: flex-end;
        border-bottom-right-radius: 4px;
        color: #000033;
        align-self: flex-start;
    }

    .psw-bot-message {
        background-color: #e9e9f8;
        align-self: flex-end;
        border-bottom-left-radius: 4px;
        color: #000; 
    }

    .psw-bot-message h1,
    .psw-bot-message h2,
    .psw-bot-message h3,
    .psw-bot-message h4,
    .psw-bot-message h5,
    .psw-bot-message h6 {
        margin: 10px 0 5px 0;
        font-weight: bold;
        color: #333;
    }

    .psw-bot-message h1 {
        font-size: 1.4em;
    }
    .psw-bot-message h2 {
        font-size: 1.3em;
    }
    .psw-bot-message h3 {
        font-size: 1.2em;
    }
    .psw-bot-message h4,
    .psw-bot-message h5,
    .psw-bot-message h6 {
        font-size: 1.1em;
    }

    .psw-bot-message p {
        margin: 0 0 10px 0;
        line-height: 1.4;
    }

    .psw-bot-message ul,
    .psw-bot-message ol {
        margin: 5px 0;
        padding-left: 20px;
    }

    .psw-bot-message li {
        margin-bottom: 3px;
    }

    .psw-bot-message a {
        color: #000066;
        text-decoration: none;
    }

    .psw-bot-message a:hover {
        text-decoration: underline;
    }

    .psw-bot-message code {
        background-color: #f7f7f7;
        padding: 2px 5px;
        border-radius: 3px;
        font-family: monospace;
        font-size: 0.9em;
    }

    .psw-bot-message pre {
        background-color: #f7f7f7;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
        margin: 10px 0;
    }

    .psw-bot-message blockquote {
        border-left: 3px solid #ccc;
        margin: 10px 0;
        padding-left: 10px;
        color: #666;
    }

    .psw-bot-message table {
        border-collapse: collapse;
        width: 100%;
        margin: 10px 0;
    }

    .psw-bot-message th,
    .psw-bot-message td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: right;
    }

    .psw-bot-message th {
        background-color: #f2f2f2;
    }

    #psw-chat-input-container {
        padding: 15px;
        border-top: 1px solid #e6e6e6;
        display: flex;
        align-items: center;
    }

    #psw-chat-input {
        flex: 1;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 20px;
        outline: none;
        resize: none;
        max-height: 100px;
        min-height: 40px;
        overflow-y: auto;
        font-family: Arial, sans-serif;
        line-height: normal !important;
        text-align: right;
    }

    #psw-send-button {
        background-color: #000066;
        color: white;
        border: none;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        margin-right: 10px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: background-color 0.2s ease, transform 0.15s ease;
    }

    #psw-send-button:hover {
        background-color: #00004d;
        transform: scale(1.05);
    }

    .psw-modal {
        display: none;
        position: absolute;
        z-index: 10001;
        left: 0;
        top: 0;
        width: 100%;
        height: 97%;
        background-color: rgba(0, 0, 0, 0.4);
        border-radius: inherit;

        /* Center modal content */
        justify-content: center;
        align-items: center;
    }

    #psw-disclaimer-footer {
        font-size: 11px;
        color: #e0e0e0;
        padding: 10px;
        text-align: center;
        background-color: #000066;
        border-top: 1px solid #030346;
        line-height: normal !important;
    }
    #psw-disclaimer-footer a {
        color: #ffffff;
        text-decoration: underline;
        cursor: pointer;
        font-weight: 500;
    }

    .psw-modal-content {
        background-color: #ffffff;
        margin: 10% auto;
        padding: 24px;
        width: 85%;
        max-width: 600px;
        border-radius: 10px;
        position: relative;
        font-size: 14px;
        color: #222;
        line-height: 1.6;
        border-top: 3.63px solid #000066;
        background: linear-gradient(180deg, #e9e9f8 0%, #fff 100%);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    .psw-modal-content h3 {
        margin-top: 0;
        color: #000066;
        text-align: center;
        text-decoration: underline;
        font-weight: bold;
        font-size: 1.2em;
    }

    .psw-modal-content p {
        text-align: justify;
        font-size: smaller;
    }

    .psw-modal-close {
        position: absolute;
        top: 12px;
        right: 16px;
        color: #555;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s ease;
    }

    .psw-modal-close:hover {
        color: #000;
    }

 .psw-typing-indicator {
    display: flex;
    padding: 10px 15px;
    background-color: #f1f1f1;
    border-radius: 18px;
    border-bottom-left-radius: 4px;
    margin-bottom: 5px;
    width: fit-content;

    /* Force left alignment */
    float: left;           /* ensures it stays on the left */
    clear: both;           /* avoids overlap with previous messages */
    text-align: left;      /* keeps dots aligned properly */
}

.psw-message-divider {
  border: none;
  height: 1px;
  background: linear-gradient(to right, transparent, #c5c5f5, transparent);
  margin: 15px 0 !important;
}

.psw-audio-container {
  margin-top: 8px;
}

.psw-audio-container audio {
  width: 100%;
  outline: none;
  border-radius: 8px;
}


.psw-typing-indicator span {
    height: 8px;
    width: 8px;
    background-color: #666;
    border-radius: 50%;
    display: inline-block;
    margin-right: 5px;
    animation: psw-pulse 1.4s infinite ease-in-out;
}

.psw-typing-indicator span:nth-child(2) {
    animation-delay: 0.2s;
}

.psw-typing-indicator span:nth-child(3) {
    animation-delay: 0.4s;
    margin-right: 0;
}

    @keyframes psw-pulse {
        0%,
        50%,
        100% {
            transform: scale(1);
            opacity: 1;
        }
        25%,
        75% {
            transform: scale(0.8);
            opacity: 0.7;
        }
    }

.psw-audio-loader {
  display: none;              /* controlled by JS */
  flex-direction: column;
  align-items: center;        /* horizontal center */
  justify-content: center;    /* vertical center */
  gap: 10px;
  text-align: center;
}

#psw-stop-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
    .psw-cursor {
        display: inline-block;
        width: 8px;
        height: 16px;
        background-color: #333;
        animation: psw-blink 1s infinite;
        margin-left: 2px;
        vertical-align: middle;
    }

    @keyframes psw-blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }

    #psw-chat-form-container {
        padding: 0 15px;
        line-height: normal !important;
    }

.psw-form-control {
    width: 95%;
    padding: 8px 12px;
    border: 1px solid #000066;
    border-radius: 4px;
    margin: 0 auto 10px auto;
    display: block;
    font-family: Arial, sans-serif;
    direction: rtl;       /* ensures text and placeholder align right for Urdu */
    text-align: right;    /* aligns both user input and placeholder to right */
}

.psw-form-control::placeholder {
    text-align: right;    /* placeholder specifically aligned right */
    opacity: 0.7;         /* subtle styling for better UX */
}

.psw-form-control:focus {
    border-color: #000066;
    box-shadow: 0 0 0 0.2rem #111161;
    outline: none;
     direction: rtl;          /* ensure focus respects RTL */
    text-align: right;
}

    .psw-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        min-width: 100px;
        cursor: pointer;
        font-size: 14px;
        text-align: center;
        display: block;
        margin: 10px auto;
    }

    .psw-btn-success {
        background-color: #000066;
        color: white;
    }

    .psw-btn-success:hover {
        background-color: #030344;
    }

    .psw-text-danger {
        color: #dc3545;
        font-size: 0.875em;
        margin-top: 5px;
    }  

    .psw-star {
        color: #ffc107;
        cursor: pointer;
        font-size: 28px;
        transition: transform 0.2s ease;
    }

    .psw-star:hover {
        transform: scale(1.2);
    }

    .psw-feedback-form {
        display: flex;
        flex-direction: column;
        padding: 15px;
        border: 1px solid #ddd;
        background-color: #f8f9fa;
        margin: 10px;
        border-radius: 5px;
    }

    .psw-clear-chat {
     width: 25px;
    height: 32px;
        cursor: pointer;
        margin-right: 10px;
        font-size: 18px;
        background-color: #000066;
        color: white;
        padding: 6px 10px;
        border: none;
        border-radius: 50%;
        transition: background-color 0.2s ease, transform 0.1s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .psw-clear-chat:hover {
        background-color: #0d0d52;
        transform: scale(1.05);
    }

    .psw-clear-chat.disabled {
        opacity: 0.5;
        pointer-events: none;
        cursor: not-allowed;
    }
    button:disabled {
        cursor: not-allowed;
        pointer-events: none;
    }

    #psw-mic-btn,
#psw-stop-btn {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  margin-right: 6px;
}

#psw-stop-btn {
  color: red;
}

.psw-loader {
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: center;
}


.psw-spinner {
  border: 3px solid #f3f3f3; /* light gray */
  border-top: 3px solid #0d0d52; /* green */
  border-radius: 50%;
  width: 70px;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.psw-audio-btn {
  background-color: #000066; /* blue background */
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.psw-audio-btn:hover {
  background-color: #0d0d52; /* slightly lighter blue on hover */
}

.psw-audio-btn svg {
  width: 20px;
  height: 20px;
  fill: white;
}
#psw-mic-btn {
  width: 45px;
  height: 45px;
  margin-left: 5px;
  background-color: #0d0d52;
  border: 1px solid #ccc;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

#psw-mic-btn:hover {
  background-color: #000066;
}

#psw-mic-btn svg {
  width: 24px;
  height: 24px;
  stroke: #333; /* icon color */
}


    @media (max-width: 480px) {
        #psw-chat-widget {
            width: 100vw;
            height: 100vh;
            border-radius: 0;
            position: fixed;
            bottom: 0;
            right: 0;
            left: 0;
            top: 0;
            max-height: none;
            min-height: auto;
            margin: 0;
        }

        .chat-label {
            display: inline;
        }

        #psw-chat-header {
            padding: 10px;
            direction: rtl;
        }

        #psw-chat-title {
            font-size: 14px;
        }

        #psw-close-chat,
        #psw-exit-chat {
            font-size: 18px;
        }

        #psw-chat-messages {
            padding: 10px;
            height: auto;
            max-height: calc(100vh - 170px);
        }

        .psw-message {
            padding: 8px 12px;
            font-size: 14px;
        }

        #psw-chat-input-container {
            padding: 10px;
        }

        #psw-chat-input {
            padding: 8px 12px;
            font-size: 14px;
            max-height: 80px;
        }

        #psw-send-button {
            width: 40px;
            height: 40px;
        }

        .psw-feedback-form {
            padding: 10px;
            margin: 10px 0;
        }

        .psw-form-control {
            font-size: 14px;
            width: 100%;
        }

        .psw-btn {
            font-size: 13px;
            padding: 8px 12px;
        }
    }
`;function Lt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var he=Lt();function En(h){he=h}var Ge={exec:()=>null};function L(h,e=""){let a=typeof h=="string"?h:h.source,c={replace:(l,p)=>{let s=typeof p=="string"?p:p.source;return s=s.replace(G.caret,"$1"),a=a.replace(l,s),c},getRegex:()=>new RegExp(a,e)};return c}var G={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:h=>new RegExp(`^( {0,3}${h})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:h=>new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:h=>new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:h=>new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:h=>new RegExp(`^ {0,${Math.min(3,h-1)}}#`),htmlBeginRegex:h=>new RegExp(`^ {0,${Math.min(3,h-1)}}<(?:[a-z].*>|!--)`,"i")},xi=/^(?:[ \t]*(?:\n|$))+/,wi=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ti=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ve=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ki=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Mt=/(?:[*+-]|\d{1,9}[.)])/,On=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,An=L(On).replace(/bull/g,Mt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Si=L(On).replace(/bull/g,Mt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Rt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ei=/^[^\n]+/,Pt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oi=L(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Pt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ai=L(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mt).getRegex(),at="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",It=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ci=L("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",It).replace("tag",at).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cn=L(Rt).replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex(),Li=L(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cn).getRegex(),Nt={blockquote:Li,code:wi,def:Oi,fences:Ti,heading:ki,hr:Ve,html:Ci,lheading:An,list:Ai,newline:xi,paragraph:Cn,table:Ge,text:Ei},xn=L("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex(),Mi={...Nt,lheading:Si,table:xn,paragraph:L(Rt).replace("hr",Ve).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",at).getRegex()},Ri={...Nt,html:L(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",It).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ge,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:L(Rt).replace("hr",Ve).replace("heading",` *#{1,6} *[^
]`).replace("lheading",An).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Pi=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ii=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ln=/^( {2,}|\\)\n(?!\s*$)/,Ni=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,lt=/[\p{P}\p{S}]/u,jt=/[\s\p{P}\p{S}]/u,Mn=/[^\s\p{P}\p{S}]/u,ji=L(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,jt).getRegex(),Rn=/(?!~)[\p{P}\p{S}]/u,Di=/(?!~)[\s\p{P}\p{S}]/u,Bi=/(?:[^\s\p{P}\p{S}]|~)/u,zi=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Pn=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Hi=L(Pn,"u").replace(/punct/g,lt).getRegex(),$i=L(Pn,"u").replace(/punct/g,Rn).getRegex(),In="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Fi=L(In,"gu").replace(/notPunctSpace/g,Mn).replace(/punctSpace/g,jt).replace(/punct/g,lt).getRegex(),Ui=L(In,"gu").replace(/notPunctSpace/g,Bi).replace(/punctSpace/g,Di).replace(/punct/g,Rn).getRegex(),Wi=L("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Mn).replace(/punctSpace/g,jt).replace(/punct/g,lt).getRegex(),qi=L(/\\(punct)/,"gu").replace(/punct/g,lt).getRegex(),Gi=L(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Vi=L(It).replace("(?:-->|$)","-->").getRegex(),Zi=L("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Vi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ot=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Yi=L(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ot).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Nn=L(/^!?\[(label)\]\[(ref)\]/).replace("label",ot).replace("ref",Pt).getRegex(),jn=L(/^!?\[(ref)\](?:\[\])?/).replace("ref",Pt).getRegex(),Xi=L("reflink|nolink(?!\\()","g").replace("reflink",Nn).replace("nolink",jn).getRegex(),Dt={_backpedal:Ge,anyPunctuation:qi,autolink:Gi,blockSkip:zi,br:Ln,code:Ii,del:Ge,emStrongLDelim:Hi,emStrongRDelimAst:Fi,emStrongRDelimUnd:Wi,escape:Pi,link:Yi,nolink:jn,punctuation:ji,reflink:Nn,reflinkSearch:Xi,tag:Zi,text:Ni,url:Ge},Ki={...Dt,link:L(/^!?\[(label)\]\((.*?)\)/).replace("label",ot).getRegex(),reflink:L(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ot).getRegex()},Ot={...Dt,emStrongRDelimAst:Ui,emStrongLDelim:$i,url:L(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qi={...Ot,br:L(Ln).replace("{2,}","*").getRegex(),text:L(Ot.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},nt={normal:Nt,gfm:Mi,pedantic:Ri},We={normal:Dt,gfm:Ot,breaks:Qi,pedantic:Ki},Ji={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wn=h=>Ji[h];function Q(h,e){if(e){if(G.escapeTest.test(h))return h.replace(G.escapeReplace,wn)}else if(G.escapeTestNoEncode.test(h))return h.replace(G.escapeReplaceNoEncode,wn);return h}function Tn(h){try{h=encodeURI(h).replace(G.percentDecode,"%")}catch{return null}return h}function kn(h,e){let a=h.replace(G.findPipe,(p,s,t)=>{let n=!1,i=s;for(;--i>=0&&t[i]==="\\";)n=!n;return n?"|":" |"}),c=a.split(G.splitPipe),l=0;if(c[0].trim()||c.shift(),c.length>0&&!c.at(-1)?.trim()&&c.pop(),e)if(c.length>e)c.splice(e);else for(;c.length<e;)c.push("");for(;l<c.length;l++)c[l]=c[l].trim().replace(G.slashPipe,"|");return c}function qe(h,e,a){let c=h.length;if(c===0)return"";let l=0;for(;l<c;){let p=h.charAt(c-l-1);if(p===e&&!a)l++;else if(p!==e&&a)l++;else break}return h.slice(0,c-l)}function eo(h,e){if(h.indexOf(e[1])===-1)return-1;let a=0;for(let c=0;c<h.length;c++)if(h[c]==="\\")c++;else if(h[c]===e[0])a++;else if(h[c]===e[1]&&(a--,a<0))return c;return a>0?-2:-1}function Sn(h,e,a,c,l){let p=e.href,s=e.title||null,t=h[1].replace(l.other.outputLinkReplace,"$1");c.state.inLink=!0;let n={type:h[0].charAt(0)==="!"?"image":"link",raw:a,href:p,title:s,text:t,tokens:c.inlineTokens(t)};return c.state.inLink=!1,n}function to(h,e,a){let c=h.match(a.other.indentCodeCompensation);if(c===null)return e;let l=c[1];return e.split(`
`).map(p=>{let s=p.match(a.other.beginningSpace);if(s===null)return p;let[t]=s;return t.length>=l.length?p.slice(l.length):p}).join(`
`)}var rt=class{options;rules;lexer;constructor(h){this.options=h||he}space(h){let e=this.rules.block.newline.exec(h);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(h){let e=this.rules.block.code.exec(h);if(e){let a=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?a:qe(a,`
`)}}}fences(h){let e=this.rules.block.fences.exec(h);if(e){let a=e[0],c=to(a,e[3]||"",this.rules);return{type:"code",raw:a,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:c}}}heading(h){let e=this.rules.block.heading.exec(h);if(e){let a=e[2].trim();if(this.rules.other.endingHash.test(a)){let c=qe(a,"#");(this.options.pedantic||!c||this.rules.other.endingSpaceChar.test(c))&&(a=c.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(h){let e=this.rules.block.hr.exec(h);if(e)return{type:"hr",raw:qe(e[0],`
`)}}blockquote(h){let e=this.rules.block.blockquote.exec(h);if(e){let a=qe(e[0],`
`).split(`
`),c="",l="",p=[];for(;a.length>0;){let s=!1,t=[],n;for(n=0;n<a.length;n++)if(this.rules.other.blockquoteStart.test(a[n]))t.push(a[n]),s=!0;else if(!s)t.push(a[n]);else break;a=a.slice(n);let i=t.join(`
`),r=i.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");c=c?`${c}
${i}`:i,l=l?`${l}
${r}`:r;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(r,p,!0),this.lexer.state.top=d,a.length===0)break;let o=p.at(-1);if(o?.type==="code")break;if(o?.type==="blockquote"){let u=o,f=u.raw+`
`+a.join(`
`),m=this.blockquote(f);p[p.length-1]=m,c=c.substring(0,c.length-u.raw.length)+m.raw,l=l.substring(0,l.length-u.text.length)+m.text;break}else if(o?.type==="list"){let u=o,f=u.raw+`
`+a.join(`
`),m=this.list(f);p[p.length-1]=m,c=c.substring(0,c.length-o.raw.length)+m.raw,l=l.substring(0,l.length-u.raw.length)+m.raw,a=f.substring(p.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:c,tokens:p,text:l}}}list(h){let e=this.rules.block.list.exec(h);if(e){let a=e[1].trim(),c=a.length>1,l={type:"list",raw:"",ordered:c,start:c?+a.slice(0,-1):"",loose:!1,items:[]};a=c?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=c?a:"[*+-]");let p=this.rules.other.listItemRegex(a),s=!1;for(;h;){let n=!1,i="",r="";if(!(e=p.exec(h))||this.rules.block.hr.test(h))break;i=e[0],h=h.substring(i.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),o=h.split(`
`,1)[0],u=!d.trim(),f=0;if(this.options.pedantic?(f=2,r=d.trimStart()):u?f=e[1].length+1:(f=e[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,r=d.slice(f),f+=e[1].length),u&&this.rules.other.blankLine.test(o)&&(i+=o+`
`,h=h.substring(o.length+1),n=!0),!n){let x=this.rules.other.nextBulletRegex(f),w=this.rules.other.hrRegex(f),E=this.rules.other.fencesBeginRegex(f),b=this.rules.other.headingBeginRegex(f),v=this.rules.other.htmlBeginRegex(f);for(;h;){let T=h.split(`
`,1)[0],O;if(o=T,this.options.pedantic?(o=o.replace(this.rules.other.listReplaceNesting,"  "),O=o):O=o.replace(this.rules.other.tabCharGlobal,"    "),E.test(o)||b.test(o)||v.test(o)||x.test(o)||w.test(o))break;if(O.search(this.rules.other.nonSpaceChar)>=f||!o.trim())r+=`
`+O.slice(f);else{if(u||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(d)||b.test(d)||w.test(d))break;r+=`
`+o}!u&&!o.trim()&&(u=!0),i+=T+`
`,h=h.substring(T.length+1),d=O.slice(f)}}l.loose||(s?l.loose=!0:this.rules.other.doubleBlankLine.test(i)&&(s=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(r),m&&(y=m[0]!=="[ ] ",r=r.replace(this.rules.other.listReplaceTask,""))),l.items.push({type:"list_item",raw:i,task:!!m,checked:y,loose:!1,text:r,tokens:[]}),l.raw+=i}let t=l.items.at(-1);if(t)t.raw=t.raw.trimEnd(),t.text=t.text.trimEnd();else return;l.raw=l.raw.trimEnd();for(let n=0;n<l.items.length;n++)if(this.lexer.state.top=!1,l.items[n].tokens=this.lexer.blockTokens(l.items[n].text,[]),!l.loose){let i=l.items[n].tokens.filter(d=>d.type==="space"),r=i.length>0&&i.some(d=>this.rules.other.anyLine.test(d.raw));l.loose=r}if(l.loose)for(let n=0;n<l.items.length;n++)l.items[n].loose=!0;return l}}html(h){let e=this.rules.block.html.exec(h);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(h){let e=this.rules.block.def.exec(h);if(e){let a=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),c=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:a,raw:e[0],href:c,title:l}}}table(h){let e=this.rules.block.table.exec(h);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let a=kn(e[1]),c=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),l=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],p={type:"table",raw:e[0],header:[],align:[],rows:[]};if(a.length===c.length){for(let s of c)this.rules.other.tableAlignRight.test(s)?p.align.push("right"):this.rules.other.tableAlignCenter.test(s)?p.align.push("center"):this.rules.other.tableAlignLeft.test(s)?p.align.push("left"):p.align.push(null);for(let s=0;s<a.length;s++)p.header.push({text:a[s],tokens:this.lexer.inline(a[s]),header:!0,align:p.align[s]});for(let s of l)p.rows.push(kn(s,p.header.length).map((t,n)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:p.align[n]})));return p}}lheading(h){let e=this.rules.block.lheading.exec(h);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(h){let e=this.rules.block.paragraph.exec(h);if(e){let a=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:a,tokens:this.lexer.inline(a)}}}text(h){let e=this.rules.block.text.exec(h);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(h){let e=this.rules.inline.escape.exec(h);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(h){let e=this.rules.inline.tag.exec(h);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(h){let e=this.rules.inline.link.exec(h);if(e){let a=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;let p=qe(a.slice(0,-1),"\\");if((a.length-p.length)%2===0)return}else{let p=eo(e[2],"()");if(p===-2)return;if(p>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+p;e[2]=e[2].substring(0,p),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let c=e[2],l="";if(this.options.pedantic){let p=this.rules.other.pedanticHrefTitle.exec(c);p&&(c=p[1],l=p[3])}else l=e[3]?e[3].slice(1,-1):"";return c=c.trim(),this.rules.other.startAngleBracket.test(c)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?c=c.slice(1):c=c.slice(1,-1)),Sn(e,{href:c&&c.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(h,e){let a;if((a=this.rules.inline.reflink.exec(h))||(a=this.rules.inline.nolink.exec(h))){let c=(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," "),l=e[c.toLowerCase()];if(!l){let p=a[0].charAt(0);return{type:"text",raw:p,text:p}}return Sn(a,l,a[0],this.lexer,this.rules)}}emStrong(h,e,a=""){let c=this.rules.inline.emStrongLDelim.exec(h);if(!(!c||c[3]&&a.match(this.rules.other.unicodeAlphaNumeric))&&(!(c[1]||c[2])||!a||this.rules.inline.punctuation.exec(a))){let l=[...c[0]].length-1,p,s,t=l,n=0,i=c[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(i.lastIndex=0,e=e.slice(-1*h.length+l);(c=i.exec(e))!=null;){if(p=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!p)continue;if(s=[...p].length,c[3]||c[4]){t+=s;continue}else if((c[5]||c[6])&&l%3&&!((l+s)%3)){n+=s;continue}if(t-=s,t>0)continue;s=Math.min(s,s+t+n);let r=[...c[0]][0].length,d=h.slice(0,l+c.index+r+s);if(Math.min(l,s)%2){let u=d.slice(1,-1);return{type:"em",raw:d,text:u,tokens:this.lexer.inlineTokens(u)}}let o=d.slice(2,-2);return{type:"strong",raw:d,text:o,tokens:this.lexer.inlineTokens(o)}}}}codespan(h){let e=this.rules.inline.code.exec(h);if(e){let a=e[2].replace(this.rules.other.newLineCharGlobal," "),c=this.rules.other.nonSpaceChar.test(a),l=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return c&&l&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:e[0],text:a}}}br(h){let e=this.rules.inline.br.exec(h);if(e)return{type:"br",raw:e[0]}}del(h){let e=this.rules.inline.del.exec(h);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(h){let e=this.rules.inline.autolink.exec(h);if(e){let a,c;return e[2]==="@"?(a=e[1],c="mailto:"+a):(a=e[1],c=a),{type:"link",raw:e[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}url(h){let e;if(e=this.rules.inline.url.exec(h)){let a,c;if(e[2]==="@")a=e[0],c="mailto:"+a;else{let l;do l=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(l!==e[0]);a=e[0],e[1]==="www."?c="http://"+e[0]:c=e[0]}return{type:"link",raw:e[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(h){let e=this.rules.inline.text.exec(h);if(e){let a=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:a}}}},oe=class At{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||he,this.options.tokenizer=this.options.tokenizer||new rt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={other:G,block:nt.normal,inline:We.normal};this.options.pedantic?(a.block=nt.pedantic,a.inline=We.pedantic):this.options.gfm&&(a.block=nt.gfm,this.options.breaks?a.inline=We.breaks:a.inline=We.gfm),this.tokenizer.rules=a}static get rules(){return{block:nt,inline:We}}static lex(e,a){return new At(a).lex(e)}static lexInline(e,a){return new At(a).inlineTokens(e)}lex(e){e=e.replace(G.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){let c=this.inlineQueue[a];this.inlineTokens(c.src,c.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,a=[],c=!1){for(this.options.pedantic&&(e=e.replace(G.tabCharGlobal,"    ").replace(G.spaceLine,""));e;){let l;if(this.options.extensions?.block?.some(s=>(l=s.call({lexer:this},e,a))?(e=e.substring(l.raw.length),a.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);let s=a.at(-1);l.raw.length===1&&s!==void 0?s.raw+=`
`:a.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);let s=a.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+l.raw,s.text+=`
`+l.text,this.inlineQueue.at(-1).src=s.text):a.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);let s=a.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+l.raw,s.text+=`
`+l.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),a.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),a.push(l);continue}let p=e;if(this.options.extensions?.startBlock){let s=1/0,t=e.slice(1),n;this.options.extensions.startBlock.forEach(i=>{n=i.call({lexer:this},t),typeof n=="number"&&n>=0&&(s=Math.min(s,n))}),s<1/0&&s>=0&&(p=e.substring(0,s+1))}if(this.state.top&&(l=this.tokenizer.paragraph(p))){let s=a.at(-1);c&&s?.type==="paragraph"?(s.raw+=`
`+l.raw,s.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):a.push(l),c=p.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);let s=a.at(-1);s?.type==="text"?(s.raw+=`
`+l.raw,s.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):a.push(l);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,a}inline(e,a=[]){return this.inlineQueue.push({src:e,tokens:a}),a}inlineTokens(e,a=[]){let c=e,l=null;if(this.tokens.links){let t=Object.keys(this.tokens.links);if(t.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)t.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(c))!=null;)c=c.slice(0,l.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(l=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)c=c.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let p=!1,s="";for(;e;){p||(s=""),p=!1;let t;if(this.options.extensions?.inline?.some(i=>(t=i.call({lexer:this},e,a))?(e=e.substring(t.raw.length),a.push(t),!0):!1))continue;if(t=this.tokenizer.escape(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.tag(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.link(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(t.raw.length);let i=a.at(-1);t.type==="text"&&i?.type==="text"?(i.raw+=t.raw,i.text+=t.text):a.push(t);continue}if(t=this.tokenizer.emStrong(e,c,s)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.codespan(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.br(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.del(e)){e=e.substring(t.raw.length),a.push(t);continue}if(t=this.tokenizer.autolink(e)){e=e.substring(t.raw.length),a.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(e))){e=e.substring(t.raw.length),a.push(t);continue}let n=e;if(this.options.extensions?.startInline){let i=1/0,r=e.slice(1),d;this.options.extensions.startInline.forEach(o=>{d=o.call({lexer:this},r),typeof d=="number"&&d>=0&&(i=Math.min(i,d))}),i<1/0&&i>=0&&(n=e.substring(0,i+1))}if(t=this.tokenizer.inlineText(n)){e=e.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(s=t.raw.slice(-1)),p=!0;let i=a.at(-1);i?.type==="text"?(i.raw+=t.raw,i.text+=t.text):a.push(t);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return a}},st=class{options;parser;constructor(h){this.options=h||he}space(h){return""}code({text:h,lang:e,escaped:a}){let c=(e||"").match(G.notSpaceStart)?.[0],l=h.replace(G.endingNewline,"")+`
`;return c?'<pre><code class="language-'+Q(c)+'">'+(a?l:Q(l,!0))+`</code></pre>
`:"<pre><code>"+(a?l:Q(l,!0))+`</code></pre>
`}blockquote({tokens:h}){return`<blockquote>
${this.parser.parse(h)}</blockquote>
`}html({text:h}){return h}heading({tokens:h,depth:e}){return`<h${e}>${this.parser.parseInline(h)}</h${e}>
`}hr(h){return`<hr>
`}list(h){let e=h.ordered,a=h.start,c="";for(let s=0;s<h.items.length;s++){let t=h.items[s];c+=this.listitem(t)}let l=e?"ol":"ul",p=e&&a!==1?' start="'+a+'"':"";return"<"+l+p+`>
`+c+"</"+l+`>
`}listitem(h){let e="";if(h.task){let a=this.checkbox({checked:!!h.checked});h.loose?h.tokens[0]?.type==="paragraph"?(h.tokens[0].text=a+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=a+" "+Q(h.tokens[0].tokens[0].text),h.tokens[0].tokens[0].escaped=!0)):h.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):e+=a+" "}return e+=this.parser.parse(h.tokens,!!h.loose),`<li>${e}</li>
`}checkbox({checked:h}){return"<input "+(h?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:h}){return`<p>${this.parser.parseInline(h)}</p>
`}table(h){let e="",a="";for(let l=0;l<h.header.length;l++)a+=this.tablecell(h.header[l]);e+=this.tablerow({text:a});let c="";for(let l=0;l<h.rows.length;l++){let p=h.rows[l];a="";for(let s=0;s<p.length;s++)a+=this.tablecell(p[s]);c+=this.tablerow({text:a})}return c&&(c=`<tbody>${c}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+c+`</table>
`}tablerow({text:h}){return`<tr>
${h}</tr>
`}tablecell(h){let e=this.parser.parseInline(h.tokens),a=h.header?"th":"td";return(h.align?`<${a} align="${h.align}">`:`<${a}>`)+e+`</${a}>
`}strong({tokens:h}){return`<strong>${this.parser.parseInline(h)}</strong>`}em({tokens:h}){return`<em>${this.parser.parseInline(h)}</em>`}codespan({text:h}){return`<code>${Q(h,!0)}</code>`}br(h){return"<br>"}del({tokens:h}){return`<del>${this.parser.parseInline(h)}</del>`}link({href:h,title:e,tokens:a}){let c=this.parser.parseInline(a),l=Tn(h);if(l===null)return c;h=l;let p='<a href="'+h+'"';return e&&(p+=' title="'+Q(e)+'"'),p+=">"+c+"</a>",p}image({href:h,title:e,text:a,tokens:c}){c&&(a=this.parser.parseInline(c,this.parser.textRenderer));let l=Tn(h);if(l===null)return Q(a);h=l;let p=`<img src="${h}" alt="${a}"`;return e&&(p+=` title="${Q(e)}"`),p+=">",p}text(h){return"tokens"in h&&h.tokens?this.parser.parseInline(h.tokens):"escaped"in h&&h.escaped?h.text:Q(h.text)}},Bt=class{strong({text:h}){return h}em({text:h}){return h}codespan({text:h}){return h}del({text:h}){return h}html({text:h}){return h}text({text:h}){return h}link({text:h}){return""+h}image({text:h}){return""+h}br(){return""}},re=class Ct{options;renderer;textRenderer;constructor(e){this.options=e||he,this.options.renderer=this.options.renderer||new st,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Bt}static parse(e,a){return new Ct(a).parse(e)}static parseInline(e,a){return new Ct(a).parseInline(e)}parse(e,a=!0){let c="";for(let l=0;l<e.length;l++){let p=e[l];if(this.options.extensions?.renderers?.[p.type]){let t=p,n=this.options.extensions.renderers[t.type].call({parser:this},t);if(n!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(t.type)){c+=n||"";continue}}let s=p;switch(s.type){case"space":{c+=this.renderer.space(s);continue}case"hr":{c+=this.renderer.hr(s);continue}case"heading":{c+=this.renderer.heading(s);continue}case"code":{c+=this.renderer.code(s);continue}case"table":{c+=this.renderer.table(s);continue}case"blockquote":{c+=this.renderer.blockquote(s);continue}case"list":{c+=this.renderer.list(s);continue}case"html":{c+=this.renderer.html(s);continue}case"paragraph":{c+=this.renderer.paragraph(s);continue}case"text":{let t=s,n=this.renderer.text(t);for(;l+1<e.length&&e[l+1].type==="text";)t=e[++l],n+=`
`+this.renderer.text(t);a?c+=this.renderer.paragraph({type:"paragraph",raw:n,text:n,tokens:[{type:"text",raw:n,text:n,escaped:!0}]}):c+=n;continue}default:{let t='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return c}parseInline(e,a=this.renderer){let c="";for(let l=0;l<e.length;l++){let p=e[l];if(this.options.extensions?.renderers?.[p.type]){let t=this.options.extensions.renderers[p.type].call({parser:this},p);if(t!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(p.type)){c+=t||"";continue}}let s=p;switch(s.type){case"escape":{c+=a.text(s);break}case"html":{c+=a.html(s);break}case"link":{c+=a.link(s);break}case"image":{c+=a.image(s);break}case"strong":{c+=a.strong(s);break}case"em":{c+=a.em(s);break}case"codespan":{c+=a.codespan(s);break}case"br":{c+=a.br(s);break}case"del":{c+=a.del(s);break}case"text":{c+=a.text(s);break}default:{let t='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return c}},it=class{options;block;constructor(h){this.options=h||he}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(h){return h}postprocess(h){return h}processAllTokens(h){return h}provideLexer(){return this.block?oe.lex:oe.lexInline}provideParser(){return this.block?re.parse:re.parseInline}},no=class{defaults=Lt();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=re;Renderer=st;TextRenderer=Bt;Lexer=oe;Tokenizer=rt;Hooks=it;constructor(...h){this.use(...h)}walkTokens(h,e){let a=[];for(let c of h)switch(a=a.concat(e.call(this,c)),c.type){case"table":{let l=c;for(let p of l.header)a=a.concat(this.walkTokens(p.tokens,e));for(let p of l.rows)for(let s of p)a=a.concat(this.walkTokens(s.tokens,e));break}case"list":{let l=c;a=a.concat(this.walkTokens(l.items,e));break}default:{let l=c;this.defaults.extensions?.childTokens?.[l.type]?this.defaults.extensions.childTokens[l.type].forEach(p=>{let s=l[p].flat(1/0);a=a.concat(this.walkTokens(s,e))}):l.tokens&&(a=a.concat(this.walkTokens(l.tokens,e)))}}return a}use(...h){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return h.forEach(a=>{let c={...a};if(c.async=this.defaults.async||c.async||!1,a.extensions&&(a.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){let p=e.renderers[l.name];p?e.renderers[l.name]=function(...s){let t=l.renderer.apply(this,s);return t===!1&&(t=p.apply(this,s)),t}:e.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let p=e[l.level];p?p.unshift(l.tokenizer):e[l.level]=[l.tokenizer],l.start&&(l.level==="block"?e.startBlock?e.startBlock.push(l.start):e.startBlock=[l.start]:l.level==="inline"&&(e.startInline?e.startInline.push(l.start):e.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(e.childTokens[l.name]=l.childTokens)}),c.extensions=e),a.renderer){let l=this.defaults.renderer||new st(this.defaults);for(let p in a.renderer){if(!(p in l))throw new Error(`renderer '${p}' does not exist`);if(["options","parser"].includes(p))continue;let s=p,t=a.renderer[s],n=l[s];l[s]=(...i)=>{let r=t.apply(l,i);return r===!1&&(r=n.apply(l,i)),r||""}}c.renderer=l}if(a.tokenizer){let l=this.defaults.tokenizer||new rt(this.defaults);for(let p in a.tokenizer){if(!(p in l))throw new Error(`tokenizer '${p}' does not exist`);if(["options","rules","lexer"].includes(p))continue;let s=p,t=a.tokenizer[s],n=l[s];l[s]=(...i)=>{let r=t.apply(l,i);return r===!1&&(r=n.apply(l,i)),r}}c.tokenizer=l}if(a.hooks){let l=this.defaults.hooks||new it;for(let p in a.hooks){if(!(p in l))throw new Error(`hook '${p}' does not exist`);if(["options","block"].includes(p))continue;let s=p,t=a.hooks[s],n=l[s];it.passThroughHooks.has(p)?l[s]=i=>{if(this.defaults.async)return Promise.resolve(t.call(l,i)).then(d=>n.call(l,d));let r=t.call(l,i);return n.call(l,r)}:l[s]=(...i)=>{let r=t.apply(l,i);return r===!1&&(r=n.apply(l,i)),r}}c.hooks=l}if(a.walkTokens){let l=this.defaults.walkTokens,p=a.walkTokens;c.walkTokens=function(s){let t=[];return t.push(p.call(this,s)),l&&(t=t.concat(l.call(this,s))),t}}this.defaults={...this.defaults,...c}}),this}setOptions(h){return this.defaults={...this.defaults,...h},this}lexer(h,e){return oe.lex(h,e??this.defaults)}parser(h,e){return re.parse(h,e??this.defaults)}parseMarkdown(h){return(e,a)=>{let c={...a},l={...this.defaults,...c},p=this.onError(!!l.silent,!!l.async);if(this.defaults.async===!0&&c.async===!1)return p(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return p(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return p(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));l.hooks&&(l.hooks.options=l,l.hooks.block=h);let s=l.hooks?l.hooks.provideLexer():h?oe.lex:oe.lexInline,t=l.hooks?l.hooks.provideParser():h?re.parse:re.parseInline;if(l.async)return Promise.resolve(l.hooks?l.hooks.preprocess(e):e).then(n=>s(n,l)).then(n=>l.hooks?l.hooks.processAllTokens(n):n).then(n=>l.walkTokens?Promise.all(this.walkTokens(n,l.walkTokens)).then(()=>n):n).then(n=>t(n,l)).then(n=>l.hooks?l.hooks.postprocess(n):n).catch(p);try{l.hooks&&(e=l.hooks.preprocess(e));let n=s(e,l);l.hooks&&(n=l.hooks.processAllTokens(n)),l.walkTokens&&this.walkTokens(n,l.walkTokens);let i=t(n,l);return l.hooks&&(i=l.hooks.postprocess(i)),i}catch(n){return p(n)}}}onError(h,e){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,h){let c="<p>An error occurred:</p><pre>"+Q(a.message+"",!0)+"</pre>";return e?Promise.resolve(c):c}if(e)return Promise.reject(a);throw a}}},de=new no;function C(h,e){return de.parse(h,e)}C.options=C.setOptions=function(h){return de.setOptions(h),C.defaults=de.defaults,En(C.defaults),C};C.getDefaults=Lt;C.defaults=he;C.use=function(...h){return de.use(...h),C.defaults=de.defaults,En(C.defaults),C};C.walkTokens=function(h,e){return de.walkTokens(h,e)};C.parseInline=de.parseInline;C.Parser=re;C.parser=re.parse;C.Renderer=st;C.TextRenderer=Bt;C.Lexer=oe;C.lexer=oe.lex;C.Tokenizer=rt;C.Hooks=it;C.parse=C;var so=C.options,ao=C.setOptions,lo=C.use,co=C.walkTokens,po=C.parseInline;var uo=re.parse,ho=oe.lex;function ct(h){return Se.sanitize(h,{USE_PROFILES:{html:!0}})}function zt(h=""){let e=C.parse(h);return ct(e)}(function(h,e){"use strict";let a="development",c="https://general-apis-seven.vercel.app/"?.split(","),l=h.location.hostname,p="1000",s=0;function t(d){let o=e.createElement("textarea");return o.innerHTML=d,o.value}if(a==="production"&&!c.includes(l)){console.warn("FORT Widget blocked on this domain:",l);return}let n={apiBaseUrl:"https://sonabot.concaveagri.com/api",apiKey:"a55463a81fa94c4aad11e5396ba0a787"},i={conversation_id:"",user_email:"",ntn_number:"",full_name:"",city:"",initial_data_completed:0,talking_to:"bot",socket:null,socket_connect_flag:0,isRequestingToBot:!1,reconnectTimeout:null,clearChatTimeout:null,lastMessage:null,lastAudio:null};if(a==="production"&&!c?.includes(l)){console.warn("FORT Widget blocked on this domain:",l);return}class r{constructor(){this.elements={},this.mediaRecorder=null,this.audioChunks=[],this.recordingTimeout=null,this.init()}init(){this.injectCSS(),this.createHTML(),this.bindEvents(),this.setupConnectionMonitoring(),this.loadChatFromStorage()}injectCSS(){let o=e.createElement("style");o.textContent=vn,e.head.appendChild(o)}createHTML(){let o=e.createElement("div");o.id="psw-chat-widget-container",o.innerHTML=`
                <div id="psw-chat-widget">
                    <div id="psw-chat-header">
                        <div id="psw-chat-title" style="text-align: right;"> <span style="padding-right:11px;">\u0633\u0648\u0646\u0627 \u062F\u0648\u0633\u062A \u0628\u0648\u0679 </span><br/> <span style="font-size: smaller; font-weight: lighter; padding-right: 8px;">(\u0627\u06CC\u0641 \u0627\u06CC\u0641 \u0633\u06CC \u06A9\u06CC \u062C\u0627\u0646\u0628 \u0633\u06D2)</span></div>
                        <div id="psw-chat-actions">
                            <div id="psw-close-chat" title="Close Chat">
                                <svg fill="#ffffff" width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289Z" fill="currentColor" />
                                </svg>
                            </div>
                            <div id="psw-exit-chat" title="Exit Chat">
                                <svg fill="#ffffff" width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.502 11.5a1.002 1.002 0 1 1 0 2.004 1.002 1.002 0 0 1 0-2.004Z" fill="currentColor"></path>
                                    <path d="M12 4.354v6.651l7.442-.001L17.72 9.28a.75.75 0 0 1-.073-.976l.073-.084a.75.75 0 0 1 .976-.073l.084.073 2.997 2.997a.75.75 0 0 1 .073.976l-.073.084-2.996 3.004a.75.75 0 0 1-1.134-.975l.072-.085 1.713-1.717-7.431.001L12 19.25a.75.75 0 0 1-.88.739l-8.5-1.502A.75.75 0 0 1 2 17.75V5.75a.75.75 0 0 1 .628-.74l8.5-1.396a.75.75 0 0 1 .872.74Zm-1.5.883-7 1.15V17.12l7 1.236V5.237Z" fill="currentColor"></path>
                                    <path d="M13 18.501h.765l.102-.006a.75.75 0 0 0 .648-.745l-.007-4.25H13v5.001ZM13.002 10 13 8.725V5h.745a.75.75 0 0 1 .743.647l.007.102.007 4.251h-1.5Z" fill="currentColor"></path>
                                </svg>
                            </div>
                            
                        </div>
                    </div>
                    <div class="scroll-wrapper">
                    <div id="psw-chat-messages">
                      <div class="psw-message psw-bot-message">
\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06CC\u06A9\u0645 \u0645\u06CC\u06BA \u0633\u0648\u0646\u0627 \u062F\u0648\u0633\u062A \u0628\u0648\u0679 \u06C1\u0648\u06BA \u0628\u0631\u0627\u0626\u06D2 \u0645\u06C1\u0631\u0628\u0627\u0646\u06CC \u0627\u067E\u0646\u0627 \u0633\u0648\u0627\u0644 \u0627\u0688\u06CC\u0648 \u06A9\u06D2 \u0630\u0631\u06CC\u0639\u06D2 \u0631\u06CC\u06A9\u0627\u0631\u0688 \u06A9\u0631\u0627\u0626\u06CC\u06D2
</div>

                    </div>
                    </div>
                    <div id="psw-chat-form-container"></div>
                    <div id="psw-chat-input-container">
                        <div class="psw-clear-chat" title="Clear Chat">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="#ffffff">
                                <path d="M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5s-2.24 5-5 5a5 5 0 0 1-4.9-4h-2.02a7 7 0 0 0 6.92 6 7 7 0 0 0 0-14z"/>
                            </svg>
                        </div>
                        <button id="psw-send-button" title="Send Message">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 2L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <textarea id="psw-chat-input" rows="1" placeholder="\u0627\u067E\u0646\u0627 \u0633\u0648\u0627\u0644 \u0679\u0627\u0626\u067E \u06A9\u0631\u06CC\u06BA\u06D4"></textarea>
                        
                        
<button id="psw-mic-btn" title="Record voice">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 14C13.6569 14 15 12.6569 15 11V5C15 3.34315 13.6569 2 12 2C10.3431 2 9 3.34315 9 5V11C9 12.6569 10.3431 14 12 14Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M19 11C19 14.3137 16.3137 17 13 17H11C7.68629 17 5 14.3137 5 11" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12 17V22" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M8 22H16" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>

<!-- Audio Loader --> 
<div id="psw-audio-loader" class="psw-audio-loader" style="margin-left:160px;">
     <div class="psw-spinner"></div> 
     <span id="psw-audio-timer">10s</span>
      <!-- Stop button at bottom --> 
       <button id="psw-stop-btn">\u23F9 Stop</button> 
</div>


<div id="psw-audio-actions" style="display:none; gap: 10px; margin-top: 5px; margin-left: 8px;">
  <button id="psw-audio-send" class="psw-audio-btn" title="Send">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
      <path d="M2 21l21-9L2 3v7l15 2-15 2v7z" />
    </svg>
  </button>

  <button id="psw-audio-delete" class="psw-audio-btn" title="Delete">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
      <path d="M3 6h18v2H3V6zm2 3h14l-1 12H6L5 9zm5-5h4v2h-4V4z"/>
    </svg>
  </button>
</div>
                    </div>
                    <div id="psw-disclaimer-footer">
  <span>\u0627\u0633 \u0686\u06CC\u0679 \u0628\u0648\u0679 \u06A9\u0648 \u0627\u0633\u062A\u0639\u0645\u0627\u0644 \u06A9\u0631\u06A9\u06D2\u060C \u0622\u067E \u062A\u0633\u0644\u06CC\u0645 \u06A9\u0631\u062A\u06D2 \u06C1\u06CC\u06BA \u0627\u0648\u0631 \u0627\u062A\u0641\u0627\u0642 \u06A9\u0631\u062A\u06D2 \u06C1\u06CC\u06BA \u06A9\u06C1... <a href="#" id="psw-read-more-link">\u0645\u0632\u06CC\u062F \u067E\u0691\u06BE\u06CC\u06BA</a></span>
</div>

<div id="psw-disclaimer-modal" class="psw-modal">
  <div class="psw-modal-content">
    <span class="psw-modal-close">&times;</span>
    <h3>\u0688\u0633\u06A9\u0644\u06CC\u0645\u0631</h3>
    <p>
     \u06CC\u06C1 \u0648\u0631\u0686\u0648\u0626\u0644 \u0627\u0633\u0633\u0679\u0646\u0679 Concave FORT \u06A9\u06CC \u062C\u0627\u0646\u0628 \u0633\u06D2 \u0635\u0631\u0641 \u0639\u0645\u0648\u0645\u06CC \u0645\u0639\u0644\u0648\u0645\u0627\u062A\u06CC \u0645\u0642\u0627\u0635\u062F \u06A9\u06D2 \u0644\u06CC\u06D2 \u0641\u0631\u0627\u06C1\u0645 \u06A9\u06CC\u0627 \u06AF\u06CC\u0627 \u06C1\u06D2\u06D4 \u0627\u0633 \u0686\u06CC\u0679 \u0628\u0648\u0679 \u06A9\u06D2 \u0630\u0631\u06CC\u0639\u06D2 \u062F\u06CC\u06D2 \u06AF\u0626\u06D2 \u062C\u0648\u0627\u0628\u0627\u062A \u06A9\u0633\u06CC \u0628\u06BE\u06CC \u0642\u0633\u0645 \u06A9\u06D2 \u067E\u06CC\u0634\u06C1 \u0648\u0631\u0627\u0646\u06C1 \u0645\u0634\u0648\u0631\u06D2\u060C \u0633\u0631\u06A9\u0627\u0631\u06CC \u0641\u06CC\u0635\u0644\u06D2\u060C \u06CC\u0627 \u0642\u0627\u0646\u0648\u0646\u06CC \u0637\u0648\u0631 \u067E\u0631 \u067E\u0627\u0628\u0646\u062F \u0648\u0639\u062F\u0648\u06BA \u06A9\u06CC \u062D\u06CC\u062B\u06CC\u062A \u0646\u06C1\u06CC\u06BA \u0631\u06A9\u06BE\u062A\u06D2\u06D4 \u0627\u06AF\u0631\u0686\u06C1 \u062F\u0631\u0633\u062A\u06AF\u06CC \u0627\u0648\u0631 \u0645\u0637\u0627\u0628\u0642\u062A \u0628\u0631\u0642\u0631\u0627\u0631 \u0631\u06A9\u06BE\u0646\u06D2 \u06A9\u06CC \u06C1\u0631 \u0645\u0645\u06A9\u0646 \u06A9\u0648\u0634\u0634 \u06A9\u06CC \u062C\u0627\u062A\u06CC \u06C1\u06D2\u060C \u062A\u0627\u06C1\u0645 \u0635\u0627\u0631\u0641\u06CC\u0646 \u06A9\u0648 \u0645\u0634\u0648\u0631\u06C1 \u062F\u06CC\u0627 \u062C\u0627\u062A\u0627 \u06C1\u06D2 \u06A9\u06C1 \u062A\u0635\u062F\u06CC\u0642 \u0634\u062F\u06C1 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0648\u0631 \u0645\u0627\u06C1\u0631 \u0631\u06C1\u0646\u0645\u0627\u0626\u06CC \u06A9\u06D2 \u0644\u06CC\u06D2 Concave FORT \u06A9\u06D2 \u0633\u0631\u06A9\u0627\u0631\u06CC \u0630\u0631\u0627\u0626\u0639 \u0633\u06D2 \u0631\u062C\u0648\u0639 \u06A9\u0631\u06CC\u06BA \u06CC\u0627 \u06C1\u0645\u0627\u0631\u06CC \u0633\u067E\u0648\u0631\u0679 \u0679\u06CC\u0645 \u0633\u06D2 \u0631\u0627\u0628\u0637\u06C1 \u06A9\u0631\u06CC\u06BA\u06D4 Concave FORT \u0627\u0633 \u0686\u06CC\u0679 \u0628\u0648\u0679 \u06A9\u06D2 \u0641\u0631\u0627\u06C1\u0645 \u06A9\u0631\u062F\u06C1 \u062C\u0648\u0627\u0628\u0627\u062A \u067E\u0631 \u0627\u0646\u062D\u0635\u0627\u0631 \u06A9\u0631\u0646\u06D2 \u0633\u06D2 \u067E\u06CC\u062F\u0627 \u06C1\u0648\u0646\u06D2 \u0648\u0627\u0644\u06D2 \u06A9\u0633\u06CC \u0628\u06BE\u06CC \u0628\u0631\u0627\u06C1\u0650 \u0631\u0627\u0633\u062A \u06CC\u0627 \u0628\u0627\u0644\u0648\u0627\u0633\u0637\u06C1 \u0646\u0642\u0635\u0627\u0646 \u06CC\u0627 \u062E\u0633\u0627\u0631\u06D2 \u06A9\u06CC \u0630\u0645\u06C1 \u062F\u0627\u0631\u06CC \u0642\u0628\u0648\u0644 \u0646\u06C1\u06CC\u06BA \u06A9\u0631\u062A\u0627\u06D4
    </p>
  </div>
</div>

                </div>
<button id="psw-chat-widget-button">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
    <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92176 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.6056 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z"
          stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  <span class="chat-label">\u0633\u0648\u0646\u0627 \u062F\u0648\u0633\u062A \u0628\u0648\u0679 \u0633\u06D2 \u067E\u0648\u0686\u06BE\u06CC\u06BA</span>
</button>


            `,e.body.appendChild(o),this.elements={container:o,widget:e.getElementById("psw-chat-widget"),button:e.getElementById("psw-chat-widget-button"),closeChat:e.getElementById("psw-close-chat"),exitChat:e.getElementById("psw-exit-chat"),messages:e.getElementById("psw-chat-messages"),input:e.getElementById("psw-chat-input"),sendButton:e.getElementById("psw-send-button"),inputContainer:e.getElementById("psw-chat-input-container"),formContainer:e.getElementById("psw-chat-form-container"),clearChat:e.querySelector(".psw-clear-chat"),voiceButton:e.getElementById("psw-voice-button"),audioLoader:e.getElementById("psw-audio-loader"),audioActions:e.getElementById("psw-audio-actions"),audioSend:e.getElementById("psw-audio-send"),audioDelete:e.getElementById("psw-audio-delete"),micBtn:e.getElementById("psw-mic-btn"),stopBtn:e.getElementById("psw-stop-btn"),disclaimerFooter:e.getElementById("psw-disclaimer-footer"),disclaimerModal:e.getElementById("psw-disclaimer-modal"),disclaimerLink:e.getElementById("psw-read-more-link"),disclaimerClose:e.querySelector(".psw-modal-close")}}bindEvents(){this.elements.button.addEventListener("click",()=>this.openWidget()),this.elements.closeChat.addEventListener("click",()=>this.closeWidget()),this.elements.exitChat.addEventListener("click",()=>this.showFeedbackForm()),this.elements.clearChat.addEventListener("click",()=>this.clearChatHistory()),this.elements.sendButton.addEventListener("click",()=>this.handleSendMessage()),this.elements.input.addEventListener("keypress",o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),this.handleSendMessage())}),this.elements.disclaimerLink.addEventListener("click",o=>{o.preventDefault(),this.elements.disclaimerModal.style.display="flex"}),this.elements.disclaimerClose.addEventListener("click",()=>{this.elements.disclaimerModal.style.display="none"}),h.addEventListener("click",o=>{o.target===this.elements.disclaimerModal&&(this.elements.disclaimerModal.style.display="none")}),this.elements.input.addEventListener("input",function(){this.style.height="auto";let o=Math.min(Math.max(this.scrollHeight,40),100);this.style.height=o+"px"}),this.elements.micBtn.addEventListener("click",()=>{this.isRecording||this.isProcessing||this.startRecording()}),this.elements.audioSend.addEventListener("click",async()=>{if(!this.audioBlob)return;let o=await new Promise((y,x)=>{let w=new FileReader;w.onloadend=()=>y(w.result.split(",")[1]),w.onerror=x,w.readAsDataURL(this.audioBlob)}),u=e.createElement("div");u.classList.add("psw-message","psw-user-message");let f=e.createElement("audio");f.src=`data:audio/webm;base64,${o}`,f.controls=!0,u.appendChild(f),this.elements.messages.appendChild(u),this.scrollToBottom();let m=e.getElementById("psw-audio-preview");m&&m.remove(),this.sendAudioMessage(o),this.saveChatToStorage(),this.resetAudioState()}),this.elements.audioDelete.addEventListener("click",()=>{this.audioBlob=null;let o=e.getElementById("psw-audio-preview");o&&o.remove(),this.resetAudioState()}),this.elements.stopBtn&&this.elements.stopBtn.addEventListener("click",()=>{this.stopRecording()})}openWidget(){this.elements.widget.style.display="flex",this.elements.button.style.display="none",this.elements.input.focus(),this.scrollToBottom()}closeWidget(){this.elements.widget.style.display="none",this.elements.button.style.display="flex"}scrollToBottom(){this.elements.messages.scrollTop=this.elements.messages.scrollHeight}async startRecording(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Microphone not supported");return}try{this.audioStream||(this.audioStream=await navigator.mediaDevices.getUserMedia({audio:!0})),this.audioChunks=[],this.audioBlob=null,this.isRecording=!0,this.isProcessing=!0,this.mediaRecorder=new MediaRecorder(this.audioStream),this.mediaRecorder.ondataavailable=f=>{f.data.size>0&&this.audioChunks.push(f.data)},this.mediaRecorder.onstop=()=>{this.audioBlob=new Blob(this.audioChunks,{type:"audio/webm"}),this.isRecording=!1,this.isProcessing=!1,clearInterval(this.recordingInterval),this.updateAudioUI("after-record")},this.mediaRecorder.start(),this.updateAudioUI("recording");let o=10,u=e.getElementById("psw-audio-timer");u.textContent=`${o}s`,this.recordingInterval=setInterval(()=>{o-=1,o>=0?u.textContent=`${o}s`:clearInterval(this.recordingInterval)},1e3),this.recordingTimeout=setTimeout(()=>{this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.stopRecording()},1e4)}catch(o){console.error(o),alert("Microphone access denied"),this.resetAudioState()}}stopRecording(){this.mediaRecorder&&(clearTimeout(this.recordingTimeout),this.mediaRecorder.stop(),this.mediaRecorder=null)}updateAudioUI(o){let{input:u,sendButton:f,clearChat:m,micBtn:y,audioLoader:x,audioActions:w,stopBtn:E}=this.elements;if(u.style.display="none",f.style.display="none",m.style.display="none",y.style.display="none",x.style.display="none",w.style.display="none",E&&(E.style.display="none"),o==="idle"&&(u.style.display="block",f.style.display="inline-flex",m.style.display="block",y.style.display="inline-flex"),o==="recording"){let{audioLoader:b,stopBtn:v}=this.elements;b.style.display="flex",v&&(v.style.display="inline-flex")}if(o==="after-record"){w.style.display="flex",E&&(E.style.display="none");let b=e.getElementById("psw-audio-preview");b&&b.remove();let v=e.createElement("div");v.id="psw-audio-preview",v.style.display="flex",v.style.alignItems="center",v.style.gap="10px",v.style.marginTop="5px";let T=e.createElement("audio");T.src=URL.createObjectURL(this.audioBlob),T.controls=!0,v.appendChild(T),w.parentNode.insertBefore(v,w)}}resetAudioState(){this.isRecording=!1,this.isProcessing=!1,this.audioBlob=null,this.elements.stopBtn&&(this.elements.stopBtn.style.display="none");let o=e.getElementById("psw-audio-preview");o&&o.remove(),this.recordingInterval&&clearInterval(this.recordingInterval),this.updateAudioUI("idle")}handleSendMessage(){let o=Date.now();if(o-s<p)return;s=o;let u=this.elements.input.value.trim();if(!u)return;let f=Se.sanitize(u,{ALLOWED_TAGS:[],ALLOWED_ATTR:{}});if(f!==u){console.warn("Potential XSS detected. Message blocked.");return}this.elements.input.value="",this.elements.input.style.height="auto",this.sendMessage(f)}convertIfHTML(o){return/<\/?[a-z][\s\S]*>/i.test(o)?(0,Dn.default)(o):o}addUserMessage(o){let u=e.createElement("div");return u.classList.add("psw-message","psw-user-message"),u.textContent=o,this.elements.messages.appendChild(u),this.scrollToBottom(),u}updateBotMessage(o,u,f=!1,m=null){let x=/(^|\n)(#{1,6}\s+|>\s+|\d+\.\s+|[-*+]\s+)|```[\s\S]*?```|`[^`]+`|\[.+?\]\(.+?\)|\n\n/m.test(u),w=u;if(x?(w=zt(u),console.log(w,"markdown to html")):(w=t(u),console.log(w,"decoded HTML")),w=ct(w),o.innerHTML=w,!f){let b=e.createElement("span");b.classList.add("psw-cursor"),o.appendChild(b)}if(m){let b=e.createElement("hr");b.classList.add("psw-message-divider"),o.appendChild(b);let v=e.createElement("div");v.classList.add("psw-audio-container");let T=e.createElement("audio");T.src=m,T.controls=!0,v.appendChild(T),o.appendChild(v)}o.querySelectorAll("a").forEach(b=>{b.setAttribute("target","_blank"),b.setAttribute("rel","noopener noreferrer")}),this.scrollToBottom(),this.saveChatToStorage()}showTypingIndicator(){let o=e.createElement("div");o.style.display="flex",o.style.justifyContent="flex-start",o.style.width="100%",o.style.direction="ltr";let u=e.createElement("div");u.classList.add("psw-typing-indicator"),u.id="psw-typing-indicator",u.innerHTML="<span></span><span></span><span></span>",o.appendChild(u),this.elements.messages.appendChild(o),this.scrollToBottom()}removeTypingIndicator(){let o=e.getElementById("psw-typing-indicator");o&&o.remove()}showDetailsForm(){this.elements.inputContainer.style.display="none";let o=e.getElementById("psw-details-form");o&&o.remove(),this.elements.formContainer.innerHTML=`
  <form id="psw-details-form" style="display: flex; flex-direction: column; gap: 10px; padding: 15px;">
    <div>
      <input type="text" id="psw-full-name" class="psw-form-control" placeholder="\u067E\u0648\u0631\u0627 \u0646\u0627\u0645" style="text-align: right;" dir="rtl">
      <div id="psw-full-name-error" class="psw-text-danger"></div>
    </div>
    <div>
      <input type="text" id="psw-ntn-number" class="psw-form-control" placeholder="\u0641\u0648\u0646 \u0646\u0645\u0628\u0631" style="text-align: right;" dir="rtl">
      <div id="psw-ntn-number-error" class="psw-text-danger"></div>
    </div>
    <div style="display: flex; gap: 10px; justify-content: flex-end;">
      <button type="button" id="psw-skip-btn" class="psw-btn psw-btn-secondary">\u0686\u06BE\u0648\u0691\u06CC\u06BA</button>
      <button type="submit" class="psw-btn psw-btn-success">\u062C\u0645\u0639 \u06A9\u0631\u06CC\u06BA</button>
    </div>
  </form>
`,e.getElementById("psw-details-form").addEventListener("submit",u=>this.handleDetailsForm(u)),e.getElementById("psw-skip-btn").addEventListener("click",()=>this.handleSkipDetails())}async handleSkipDetails(){i.initial_data_completed=1,this.hideDetailsForm(),this.saveChatToStorage(),i.lastMessage?this.sendMessage(i.lastMessage):i.lastAudio&&this.sendAudioMessage(i.lastAudio)}async handleDetailsForm(o){o.preventDefault();let u=e.getElementById("psw-full-name"),f=e.getElementById("psw-ntn-number"),m=e.getElementById("psw-full-name-error"),y=e.getElementById("psw-ntn-number-error");m.textContent="",y.textContent="";let x=u.value.trim(),w=f.value.trim(),E=Se.sanitize(x,{ALLOWED_TAGS:[],ALLOWED_ATTR:{}}),b=Se.sanitize(w,{ALLOWED_TAGS:[],ALLOWED_ATTR:{}});if(E!==x||b!==w){console.warn("Potential XSS detected. Submission blocked."),this.addBotMessage("\u0645\u0639\u0627\u0641 \u06A9\u06CC\u062C\u06CC\u06D2\u060C \u0622\u067E \u06A9\u06D2 \u0627\u0646 \u067E\u0679 \u0645\u06CC\u06BA \u06A9\u0686\u06BE \u063A\u06CC\u0631 \u0636\u0631\u0648\u0631\u06CC \u0639\u0644\u0627\u0645\u0627\u062A \u0645\u0648\u062C\u0648\u062F \u06C1\u06CC\u06BA\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u0627\u0646\u06C1\u06CC\u06BA \u06C1\u0679\u0627 \u06A9\u0631 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4");return}let v=!1;/^((\+92)|0)3\d{9}$/.test(b)||(y.textContent="\u0641\u0648\u0646 \u0646\u0645\u0628\u0631 \u0628\u0627\u0644\u06A9\u0644 11 \u06C1\u0646\u062F\u0633\u0648\u06BA \u06A9\u0627 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2",v=!0),/\d/.test(E)&&(m.textContent="\u0645\u06A9\u0645\u0644 \u0646\u0627\u0645 \u0645\u06CC\u06BA \u0646\u0645\u0628\u0631 \u0646\u06C1\u06CC\u06BA \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2\u06D4",v=!0),!v&&(i.full_name=E,i.ntn_number=b,i.initial_data_completed=1,this.saveChatToStorage(),this.hideDetailsForm(),i.lastMessage?this.sendMessage(i.lastMessage):i.lastAudio&&this.sendAudioMessage(i.lastAudio))}hideDetailsForm(){this.elements.formContainer.innerHTML="",this.elements.inputContainer.style.display="flex"}getLocation(){console.log("Async Await Problem",navigator.geolocation,navigator),navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{let u=o.coords.latitude,f=o.coords.longitude;console.log(`Latitude: ${u}, Longitude: ${f}`)},o=>{switch(o.code){case o.PERMISSION_DENIED:console.error("User denied the request for Geolocation.");break;case o.POSITION_UNAVAILABLE:console.error("Location information is unavailable.");break;case o.TIMEOUT:console.error("The request to get user location timed out.");break;case o.UNKNOWN_ERROR:console.error("An unknown error occurred.");break}}):console.log("Geolocation is not supported by this browser.")}async sendMessage(o){try{i.initial_data_completed===0?(i.lastMessage=o,this.showDetailsForm(),this.getLocation(),this.removeTypingIndicator()):await this.sendChatMessage(o)}catch(u){a==="development"&&console.error("Error sending message:",u),this.removeTypingIndicator(),this.addBotMessage("\u0645\u0639\u0630\u0631\u062A\u060C \u0645\u062C\u06BE\u06D2 \u0631\u0627\u0628\u0637\u06C1 \u06A9\u0631\u0646\u06D2 \u0645\u06CC\u06BA \u062F\u0634\u0648\u0627\u0631\u06CC \u06C1\u0648 \u0631\u06C1\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u0645\u06C1\u0631\u0628\u0627\u0646\u06CC \u0628\u0639\u062F \u0645\u06CC\u06BA \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4")}this.saveChatToStorage()}async sendAudioMessage(o){try{if(!o)return;let u=o;i.initial_data_completed===0?(i.lastAudio=u,this.showDetailsForm(),this.getLocation(),this.removeTypingIndicator()):await this.sendChatAudio(u)}catch(u){a==="development"&&console.error("Error sending audio message:",u),this.removeTypingIndicator(),this.addBotMessage("\u0645\u0639\u0630\u0631\u062A\u060C \u0645\u062C\u06BE\u06D2 \u0622\u0688\u06CC\u0648 \u0628\u06BE\u06CC\u062C\u0646\u06D2 \u0645\u06CC\u06BA \u062F\u0634\u0648\u0627\u0631\u06CC \u06C1\u0648 \u0631\u06C1\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u0628\u0639\u062F \u0645\u06CC\u06BA \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4")}this.saveChatToStorage()}async sendChatAudio(o){if(!o)return;let u=e.getElementById("psw-chat-input"),f=e.getElementById("psw-send-button"),m=e.querySelector(".psw-clear-chat"),y=e.getElementById("psw-mic-btn");u&&(u.disabled=!0),y&&(y.disabled=!0,y.style.opacity=.5),f&&(f.disabled=!0,f.style.opacity=.5),m&&m.classList.add("disabled"),i.isRequestingToBot=!0;let x=o,w=2e5,E=new AbortController,b=setTimeout(()=>E.abort(),w);try{this.showTypingIndicator();let v=await fetch(`${n.apiBaseUrl}/process_question_website`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({api_key:n.apiKey,audio_url:x,customer_phone:i?.ntn_number,customer_name:i?.full_name}),signal:E.signal});clearTimeout(b),this.removeTypingIndicator();let T=this.createBotMessageContainer();if(v.ok){let O=await v.json(),P;O.error&&O.error.includes("daily limit")?(P="\u0645\u0639\u0627\u0641 \u06A9\u06CC\u062C\u06CC\u06D2\u060C \u0622\u067E \u06A9\u06CC \u0622\u062C \u06A9\u06CC \u06CC\u0648\u0645\u06CC\u06C1 \u062D\u062F \u067E\u0648\u0631\u06CC \u06C1\u0648 \u06AF\u0626\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u06A9\u0644 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4",this.updateBotMessage(T,P,!0,O?.audio_url),this.showFeedbackForm()):(P=O.Answer||P,this.updateBotMessage(T,P,!0,O?.audio_url))}else{let O="\u0645\u0639\u0627\u0641 \u06A9\u06CC\u062C\u06CC\u06D2\u060C \u0622\u067E \u06A9\u06CC \u0622\u062C \u06A9\u06CC \u06CC\u0648\u0645\u06CC\u06C1 \u062D\u062F \u067E\u0648\u0631\u06CC \u06C1\u0648 \u06AF\u0626\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u06A9\u0644 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4";v.status!==429?(a==="development"&&console.error("API Error:",v.status,v.statusText),O="\u0645\u0639\u0630\u0631\u062A\u060C \u062A\u06A9\u0646\u06CC\u06A9\u06CC \u062F\u0634\u0648\u0627\u0631\u06CC \u06A9\u06CC \u0648\u062C\u06C1 \u0633\u06D2 \u06C1\u0645 \u0622\u067E \u06A9\u0627 \u062C\u0648\u0627\u0628 \u0641\u0631\u0627\u06C1\u0645 \u0646\u06C1\u06CC\u06BA \u06A9\u0631 \u0633\u06A9\u06D2\u06D4 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4",this.updateBotMessage(T,O,!0)):(a==="development"&&console.warn("Daily limit reached (HTTP 429)"),this.updateBotMessage(T,O,!0),this.showFeedbackForm())}this.saveChatToStorage()}catch(v){this.removeTypingIndicator(),console.log(v);let T=this.createBotMessageContainer();this.updateBotMessage(T,"\u0645\u0639\u0630\u0631\u062A\u060C \u062A\u06A9\u0646\u06CC\u06A9\u06CC \u062F\u0634\u0648\u0627\u0631\u06CC \u06CC\u0627 \u0648\u0642\u062A \u062E\u062A\u0645 \u06C1\u0648\u0646\u06D2 \u06A9\u06CC \u0648\u062C\u06C1 \u0633\u06D2 \u06C1\u0645 \u0622\u067E \u06A9\u0627 \u062C\u0648\u0627\u0628 \u0641\u0631\u0627\u06C1\u0645 \u0646\u06C1\u06CC\u06BA \u06A9\u0631 \u0633\u06A9\u06D2\u06D4 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4",!0),a==="development"&&console.error("Chat send audio error:",v),this.saveChatToStorage()}finally{this.removeTypingIndicator(),i.isRequestingToBot=!1,u&&(u.disabled=!1),y&&(y.disabled=!1,y.style.opacity=1),f&&(f.disabled=!1,f.style.opacity=1),m&&m.classList.remove("disabled")}}async sendChatMessage(o){let u=e.getElementById("psw-chat-input"),f=e.getElementById("psw-send-button"),m=e.querySelector(".psw-clear-chat"),y=e.getElementById("psw-mic-btn");u&&(u.disabled=!0),y&&(y.disabled=!0,y.style.opacity=.5),f&&(f.disabled=!0,f.style.opacity=.5),m&&m.classList.add("disabled"),this.addUserMessage(o),i.isRequestingToBot=!0;let x=2e5,w=new AbortController,E=setTimeout(()=>w.abort(),x);try{this.showTypingIndicator();let b=await fetch(`${n.apiBaseUrl}/process_question_website`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({api_key:n.apiKey,input_text:o,customer_phone:i?.ntn_number,customer_name:i?.full_name}),signal:w.signal});clearTimeout(E),this.removeTypingIndicator();let v=this.createBotMessageContainer();if(b.ok){let T=await b.json();if(T.task_id){this.handleStreamResponse(T.task_id);return}let O;T.error&&T.error.includes("daily limit")?(O="\u0645\u0639\u0627\u0641 \u06A9\u06CC\u062C\u06CC\u06D2\u060C \u0622\u067E \u06A9\u06CC \u0622\u062C \u06A9\u06CC \u06CC\u0648\u0645\u06CC\u06C1 \u062D\u062F \u067E\u0648\u0631\u06CC \u06C1\u0648 \u06AF\u0626\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u06A9\u0644 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4",this.updateBotMessage(v,O,!0,T?.audio_url),this.showFeedbackForm()):(O=T.Answer||O,this.updateBotMessage(v,O,!0,T?.audio_url))}else{let T="\u0645\u0639\u0627\u0641 \u06A9\u06CC\u062C\u06CC\u06D2\u060C \u0622\u067E \u06A9\u06CC \u0622\u062C \u06A9\u06CC \u06CC\u0648\u0645\u06CC\u06C1 \u062D\u062F \u067E\u0648\u0631\u06CC \u06C1\u0648 \u06AF\u0626\u06CC \u06C1\u06D2\u06D4 \u0628\u0631\u0627\u06C1 \u06A9\u0631\u0645 \u06A9\u0644 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4";b.status!==429?(a==="development"&&console.error("API Error:",b.status,b.statusText),T="\u0645\u0639\u0630\u0631\u062A\u060C \u062A\u06A9\u0646\u06CC\u06A9\u06CC \u062F\u0634\u0648\u0627\u0631\u06CC \u06A9\u06CC \u0648\u062C\u06C1 \u0633\u06D2 \u06C1\u0645 \u0622\u067E \u06A9\u0627 \u062C\u0648\u0627\u0628 \u0641\u0631\u0627\u06C1\u0645 \u0646\u06C1\u06CC\u06BA \u06A9\u0631 \u0633\u06A9\u06D2\u06D4 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4"):(a==="development"&&console.warn("Daily limit reached (HTTP 429)"),this.showFeedbackForm()),this.updateBotMessage(v,T,!0)}this.saveChatToStorage()}catch(b){this.removeTypingIndicator();let v=this.createBotMessageContainer();this.updateBotMessage(v,"\u0645\u0639\u0630\u0631\u062A\u060C \u062A\u06A9\u0646\u06CC\u06A9\u06CC \u062F\u0634\u0648\u0627\u0631\u06CC \u06CC\u0627 \u0648\u0642\u062A \u062E\u062A\u0645 \u06C1\u0648\u0646\u06D2 \u06A9\u06CC \u0648\u062C\u06C1 \u0633\u06D2 \u06C1\u0645 \u0622\u067E \u06A9\u0627 \u062C\u0648\u0627\u0628 \u0641\u0631\u0627\u06C1\u0645 \u0646\u06C1\u06CC\u06BA \u06A9\u0631 \u0633\u06A9\u06D2\u06D4 \u062F\u0648\u0628\u0627\u0631\u06C1 \u06A9\u0648\u0634\u0634 \u06A9\u0631\u06CC\u06BA\u06D4",!0),a==="development"&&console.error("Chat send error:",b),this.saveChatToStorage()}finally{this.removeTypingIndicator(),i.isRequestingToBot=!1,u&&(u.disabled=!1),y&&(y.disabled=!1,y.style.opacity=1),f&&(f.disabled=!1,f.style.opacity=1),m&&m.classList.remove("disabled")}}async handleStreamResponse(o){let u="",f=null,m=!0,y,x=(b,v=!0)=>{this.removeTypingIndicator(),f||(f=this.createBotMessageContainer()),this.updateBotMessage(f,b,v),this.saveChatToStorage()},w=async()=>{if(m)try{let b=await fetch(`${n.apiBaseUrl}/api/answer_streaming`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({api_key:n.apiKey,task_id:o})});if(!b.ok){a==="development"&&console.error("Stream error:",b.statusText),m=!1;let T=e.getElementById("psw-chat-input"),O=e.getElementById("psw-send-button"),P=e.querySelector(".psw-clear-chat");return T&&(T.removeAttribute("disabled"),T.value="",T.focus()),O&&(O.disabled=!1,O.style.opacity=1),P&&P.classList.remove("disabled"),i.isRequestingToBot=!1,x("Sorry, there was an error processing your message.")}let v=await b.json();switch(v.status){case"Task is still processing":this.typingIndicatorShown||(this.removeTypingIndicator(),this.showTypingIndicator());break;case"receiving text":case"Task completed":default:if(this.removeTypingIndicator(),f||(f=this.createBotMessageContainer()),v.answer&&v.answer!==u&&(u=v.answer,this.updateBotMessage(f,u,!1)),v.status==="Task completed"){u=v.answer||u,this.updateBotMessage(f,u,!0),m=!1,clearTimeout(y),this.saveChatToStorage();let T=e.getElementById("psw-chat-input"),O=e.getElementById("psw-send-button"),P=e.querySelector(".psw-clear-chat");T&&(T.removeAttribute("disabled"),T.value="",T.focus()),O&&(O.disabled=!1,O.style.opacity=1),P&&P.classList.remove("disabled"),i.isRequestingToBot=!1;return}}m&&(y=setTimeout(w,n.streamInterval))}catch(b){a==="development"&&console.error("Stream error:",b),m=!1;let v=e.getElementById("psw-chat-input"),T=e.getElementById("psw-send-button"),O=e.querySelector(".psw-clear-chat");v&&(v.removeAttribute("disabled"),v.value="",v.focus()),T&&(T.disabled=!1,T.style.opacity=1),O&&O.classList.remove("disabled"),i.isRequestingToBot=!1,x("Sorry, there was an error processing your message.")}},E=setTimeout(()=>{if(m){m=!1;let b=e.getElementById("psw-chat-input"),v=e.getElementById("psw-send-button"),T=e.querySelector(".psw-clear-chat");b&&(b.removeAttribute("disabled"),b.value="",b.focus()),v&&(v.disabled=!1,v.style.opacity=1),T&&T.classList.remove("disabled"),i.isRequestingToBot=!1,this.removeTypingIndicator(),x("Sorry, the response timed out.")}},3e4);return w(),()=>{clearTimeout(E),clearTimeout(y)}}createBotMessageContainer(){let o=e.createElement("div");return o.classList.add("psw-message","psw-bot-message"),this.elements.messages.appendChild(o),this.scrollToBottom(),o}addBotMessage(o){let u=e.createElement("div");u.classList.add("psw-message","psw-bot-message");let m=/(^|\n)(#{1,6}\s+|>\s+|\d+\.\s+|[-*+]\s+)|```[\s\S]*?```|`[^`]+`|\[.+?\]\(.+?\)|\n\n/m.test(o),y=o;return m?y=zt(o):y=t(o),y=ct(y),u.innerHTML=y,u.querySelectorAll("a").forEach(w=>{w.setAttribute("target","_blank"),w.setAttribute("rel","noopener noreferrer")}),this.elements.messages.appendChild(u),this.scrollToBottom(),this.saveChatToStorage(),u}showFeedbackForm(){this.elements.inputContainer.classList.add("hidden"),this.elements.input.style.display="none",this.elements.sendButton.style.display="none",this.elements.clearChat.style.display="none",this.elements.micBtn.style.display="none";let o=e.createElement("div");o.classList.add("psw-feedback-form"),o.innerHTML=`
    <h4>\u06A9\u06CC\u0627 \u0627\u067E \u06C1\u0645\u0627\u0631\u06D2 \u062C\u0648\u0627\u0628 \u0633\u06D2 \u0645\u0637\u0645\u0626\u0646 \u06C1\u06CC\u06BA</h4>
    <div style="display: flex; justify-content: center; margin: 10px 0;">
        <span class="psw-star" data-rating="1">\u2605</span>
        <span class="psw-star" data-rating="2">\u2605</span>
        <span class="psw-star" data-rating="3">\u2605</span>
        <span class="psw-star" data-rating="4">\u2605</span>
        <span class="psw-star" data-rating="5">\u2605</span>
    </div>
    <textarea placeholder="\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC \u062A\u0627\u062B\u0631\u0627\u062A" rows="3" style="width: 95%; margin: 10px 0; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea>
    <div style="display: flex; gap: 10px;">
        <button class="psw-btn psw-btn-success">\u062C\u0645\u0639 \u06A9\u0631\u0648\u0627\u0626\u06CC\u06BA</button>
        <button class="psw-btn" style="background-color: #6c757d; color: white;">\u0686\u06BE\u0648\u0691 \u062F\u06CC\u06BA</button>
    </div>
  `;let u=0,f=o.querySelectorAll(".psw-star");f.forEach((E,b)=>{E.addEventListener("click",()=>{u=b+1,f.forEach((v,T)=>{v.style.color=T<u?"#ffc107":"#e4e5e9"})})});let m=o.querySelector(".psw-btn-success"),y=o.querySelector(".psw-btn:nth-child(2)"),x=o.querySelector("textarea"),w=()=>{this.elements.input.style.display="block",this.elements.sendButton.style.display="flex",this.elements.clearChat.style.display="flex",this.elements.micBtn.style.display="block"};m.addEventListener("click",async()=>{let E=x.value.trim();await this.submitFeedback(u,E),o.remove(),w(),this.clearChatHistory(),setTimeout(()=>{this.closeWidget()},500)}),y.addEventListener("click",()=>{o.remove(),w(),this.clearChatHistory(),setTimeout(()=>{this.closeWidget()},500)}),this.elements.messages.appendChild(o)}async submitFeedback(o,u){try{await fetch(`${n.apiBaseUrl}/process_feedback_website`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:n.apiKey,feedback_rating:o===0?5:o,feedback_comment:u})})}catch(f){a==="development"&&console.error("Error submitting feedback:",f)}}clearChatHistory(){this.clearAllTimeouts(),i.socket&&(i.socket.close(),i.socket=null),i={conversation_id:"",user_email:"",ntn_number:"",full_name:"",city:"",initial_data_completed:0,talking_to:"bot",socket:null,socket_connect_flag:0,isRequestingToBot:!1,reconnectTimeout:null,clearChatTimeout:null},this.elements.messages.innerHTML='<div class="psw-message psw-bot-message">\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u06CC\u06A9\u0645 \u0645\u06CC\u06BA <strong>\u0633\u0648\u0646\u0627 \u062F\u0648\u0633\u062A \u0628\u0648\u0679</strong> \u06C1\u0648\u06BA\u060C \u0628\u0631\u0627\u06C1\u0650 \u0645\u06C1\u0631\u0628\u0627\u0646\u06CC \u0627\u067E\u0646\u0627 \u0633\u0648\u0627\u0644 \u0622\u0688\u06CC\u0648 \u06A9\u06D2 \u0630\u0631\u06CC\u0639\u06D2 \u0631\u06CC\u06A9\u0627\u0631\u0688 \u06A9\u0631\u0627\u0626\u06CC\u06D2</div>',this.hideDetailsForm(),this.clearChatFromStorage()}saveChatToStorage(){try{localStorage.setItem("psw_chat_state",JSON.stringify({...i,_lastUpdated:new Date().getTime()})),localStorage.setItem("psw_chat_messages",this.elements.messages.innerHTML)}catch(o){a==="development"&&console.error("Error saving to localStorage:",o)}}updateMessageById(o,u){let f=`.psw-message[data-message-id="${o}"]`,m=e.querySelector(f);m&&(m.innerText=u);let y=this.elements.messages;localStorage.setItem("psw_chat_messages",y.innerHTML)}loadChatFromStorage(){try{let u=localStorage.getItem("psw_chat_state");if(u)try{let y=JSON.parse(u);if(new Date().getTime()-y?._lastUpdated>18e5){localStorage.removeItem("psw_chat_state"),localStorage.removeItem("psw_chat_messages"),i={conversation_id:"",user_email:"",ntn_number:"",full_name:"",city:"",initial_data_completed:0,talking_to:"bot",socket:null,socket_connect_flag:0};return}Object.assign(i,y)}catch{i={conversation_id:"",user_email:"",ntn_number:"",full_name:"",city:"",initial_data_completed:0,talking_to:"bot",socket:null,socket_connect_flag:0}}let f=localStorage.getItem("psw_chat_messages");if(f){let m=f;this.elements.messages.innerHTML=m}i.user_email&&i.initial_data_completed===0?this.showDetailsForm():i.initial_data_completed===1&&this.hideDetailsForm()}catch(o){a==="development"&&console.error("Error loading from localStorage:",o)}}clearChatFromStorage(){try{localStorage.removeItem("psw_chat_state"),localStorage.removeItem("psw_chat_messages")}catch(o){a==="development"&&console.error("Error clearing localStorage:",o)}}setupConnectionMonitoring(){e.addEventListener("visibilitychange",()=>{e.hidden?this.handleTabHidden():this.handleTabVisible()}),h.addEventListener("beforeunload",()=>{this.cleanupOnClose()})}handleTabHidden(){this.tabHiddenTimeout=setTimeout(()=>{this.checkDisconnectionAfterHidden()},8e3)}handleTabVisible(){this.tabHiddenTimeout&&(clearTimeout(this.tabHiddenTimeout),this.tabHiddenTimeout=null)}checkDisconnectionAfterHidden(){(!i.socket||i.socket.readyState===WebSocket.CLOSED)&&this.shouldClearChat()&&this.startClearChatCountdown()}startClearChatCountdown(){this.clearChatCountdown&&clearTimeout(this.clearChatCountdown),this.clearChatCountdown=setTimeout(()=>{this.shouldClearChat()&&this.clearChatOnDisconnect()},12e4)}clearChatOnDisconnect(){console.log("2 minutes passed without reconnection - clearing chat"),this.elements.widget.style.display==="flex"&&this.addBotMessage("\u06A9\u0646\u06A9\u0634\u0646 \u0679\u0648\u0679 \u06AF\u06CC\u0627\u06D4 \u0627\u06CC\u06A9 \u0646\u06CC\u0627 \u0686\u06CC\u0679 \u0633\u06CC\u0634\u0646 \u0634\u0631\u0648\u0639 \u06C1\u0648 \u0631\u06C1\u0627 \u06C1\u06D2..."),this.clearChatHistory()}shouldClearChat(){return i.talking_to==="agent"&&i.conversation_id&&i.initial_data_completed===1}cleanupOnClose(){this.clearAllTimeouts(),i.socket&&i.socket.close()}clearAllTimeouts(){i.reconnectTimeout&&(clearTimeout(i.reconnectTimeout),i.reconnectTimeout=null),i.clearChatTimeout&&(clearTimeout(i.clearChatTimeout),i.clearChatTimeout=null),this.tabHiddenTimeout&&(clearTimeout(this.tabHiddenTimeout),this.tabHiddenTimeout=null),this.clearChatCountdown&&(clearTimeout(this.clearChatCountdown),this.clearChatCountdown=null)}}e.readyState==="loading"?e.addEventListener("DOMContentLoaded",()=>{new r}):new r})(window,document);})();
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)
*/
